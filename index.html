<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />
  <title>Whis — Obsidian Luxe</title>
  <meta name="description" content="Whis — the ultra‑stealth interview co‑pilot. Lightning fast. Invisible. Obsidian Luxe UI."/>
  <meta name="theme-color" content="#0B0C0E"/>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: { sans: ['Inter','system-ui','-apple-system','Segoe UI','Roboto','sans-serif'] },
          colors: {
            obsidian: '#0B0C0E',
            ink: '#0E1013',
            slatehi: 'rgba(255,255,255,.86)',
            accent: '#F5D273'
          },
          boxShadow: {
            luxe: '0 0 0 1px rgba(255,255,255,.06), 0 30px 80px -20px rgba(0,0,0,.65)',
            glow: '0 0 40px rgba(245,210,115,.18)'
          },
          animation: {
            shimmer: 'shimmer 3s linear infinite',
            fadeIn: 'fadeIn .9s ease-out forwards'
          },
          keyframes: {
            shimmer: { from:{ backgroundPosition:'0 0' }, to:{ backgroundPosition:'-200% 0' }},
            fadeIn: { '0%': { opacity:0, transform:'translateY(10px)' }, '100%': { opacity:1, transform:'translateY(0)' } }
          }
        }
      }
    }
  </script>
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <style>
    html,body{height:100%;background:#0B0C0E}
    body{color:#fff;font-family:Inter,system-ui,-apple-system,'Segoe UI',Roboto,sans-serif;-webkit-font-smoothing:antialiased;overflow-x:hidden}

    /* BACKDROP — Obsidian Luxe */
    .backdrop{position:fixed;inset:0;pointer-events:none;z-index:0}
    .vignette{position:absolute;inset:0;background:radial-gradient(60% 60% at 50% 20%, rgba(255,255,255,.06) 0%, transparent 55%), radial-gradient(70% 70% at 50% 100%, rgba(255,255,255,.04) 0%, transparent 65%)}
    .noise{position:absolute;inset:0;background:url('https://grainy-gradients.vercel.app/noise.svg');opacity:.035;mix-blend:soft-light}
    .griddots{position:absolute;inset:0;background-image: radial-gradient(rgba(255,255,255,.06) 1px, transparent 1px);background-size: 22px 22px;mask-image:linear-gradient(to bottom, transparent, black 20%, black 80%, transparent);opacity:.18}

    /* GLASS + BUTTONS */
    .glass{background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));border:1px solid rgba(255,255,255,.08)}
    .btn-shine{background:linear-gradient(110deg,#111827 45%,#1f2937 55%,#111827);background-size:200% 100%;animation:shimmer 3s linear infinite;border:1px solid rgba(255,255,255,.1)}

    /* VIDEO FIT — no cropping, perfect fit in box */
    .video-wrap{position:relative}
    .video-frame{position:absolute;inset:0;width:100%;height:100%;object-fit:contain;background:#0C0D11}
    .video-frame::-webkit-media-controls{display:none!important}

    /* TYPOGRAPHY */
    .stroke-title{-webkit-text-stroke:1px rgba(255,255,255,.35)}

    /* NAV */
    .navglass{backdrop-filter: blur(14px)}
  </style>
</head>
<body>
  <!-- minimal scroll progress -->
  <div id="progress" class="fixed top-0 left-0 h-[2px] bg-[linear-gradient(90deg,rgba(245,210,115,.6),rgba(255,255,255,.8),rgba(245,210,115,.6))] w-0 z-[60]"></div>

  <!-- BACKGROUND -->
  <div class="backdrop">
    <div class="vignette"></div>
    <div class="griddots"></div>
    <div class="noise"></div>
  </div>

  <!-- NAV -->
  <nav id="nav" class="fixed top-0 z-50 w-full h-[64px] md:h-[76px] flex items-center transition-all">
    <div class="mx-auto w-full max-w-7xl px-4 md:px-6 flex items-center justify-between">
      <a href="#" class="flex items-center gap-3 group">
        <!-- Thunderstorm logo (lightning in a circle), premium monotone + accent -->
        <span class="inline-grid place-items-center w-9 h-9 rounded-full bg-white/5 border border-white/10 shadow-luxe">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-label="Whis logo">
            <circle cx="12" cy="12" r="9.5" stroke="rgba(255,255,255,.55)"/>
            <path d="M13.8 2.5 6.6 13.2h4.6l-1 8.3 7.2-10.7h-4.7l1-7.3Z" fill="#F5D273"/>
          </svg>
        </span>
        <span class="text-sm font-semibold text-slate-300 group-hover:text-white transition">whis.ai</span>
      </a>
      <div class="hidden md:flex items-center gap-1 bg-white/5 p-1 rounded-full border border-white/10 navglass">
        <a href="#how" class="px-5 py-1.5 text-xs text-slate-400 hover:text-white hover:bg-white/5 rounded-full">How It Works</a>
        <a href="#security" class="px-5 py-1.5 text-xs text-slate-400 hover:text-white hover:bg-white/5 rounded-full">Safety</a>
        <a href="#faq" class="px-5 py-1.5 text-xs text-slate-400 hover:text-white hover:bg-white/5 rounded-full">FAQ</a>
        <a href="/pricing" class="px-5 py-1.5 text-xs text-slate-400 hover:text-white hover:bg-white/5 rounded-full">Plans</a>
      </div>
      <div class="flex items-center gap-2">
        <button id="signInBtn" onclick="openLoginModal()" class="hidden md:inline text-xs font-medium text-slate-400 hover:text-white">Sign in</button>
        <button id="smartDownloadBtn" class="btn-shine px-4 py-2 rounded-full text-[11px] md:text-xs font-bold text-white shadow-glow">Get The Advantage</button>
        <button id="userProfileTrigger" onclick="openProfileModal()" class="hidden items-center gap-2 bg-white/5 pr-3 pl-1 py-1 rounded-full border border-white/10 hover:border-white/30 transition group">
          <img id="navUserAvatar" src="" class="w-6 h-6 rounded-full bg-slate-800 object-cover"/>
          <span id="navPlanBadge" class="text-[9px] font-bold text-emerald-400 uppercase tracking-wider">PRO</span>
        </button>
      </div>
    </div>
  </nav>

  <!-- HERO -->
  <header id="hero" class="relative pt-28 md:pt-40 pb-8 md:pb-14">
    <div class="max-w-6xl mx-auto px-6 text-center">
      <div class="inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-white/5 border border-white/10 text-slate-400 text-[10px] font-bold uppercase tracking-[0.2em] mb-6 animate-fadeIn">
        <span class="w-1.5 h-1.5 rounded-full bg-[color:var(--accent,#F5D273)]" style="box-shadow:0 0 10px rgba(245,210,115,.7)"></span>
        Obsidian Luxe Edition
      </div>

      <h1 class="stroke-title text-4xl md:text-7xl lg:text-8xl font-black tracking-tight leading-[1.05] mb-6">
        <span class="block bg-gradient-to-b from-white to-slate-300 bg-clip-text text-transparent">Don't Just Prepare.</span>
        <span class="block text-white">Own The Room.</span>
      </h1>

      <p id="osSubtext" class="max-w-2xl mx-auto text-slate-400 text-base md:text-lg leading-relaxed">
        Lightning‑fast, invisible assistance for high‑stakes interviews. Whisper the right answer; walk away with the offer.
      </p>

      <div class="mt-8 flex flex-col md:flex-row items-center justify-center gap-3">
        <button id="ctaPrimary" class="btn-shine inline-flex items-center justify-center rounded-xl px-8 py-3.5 text-sm font-semibold text-white shadow-glow">
          <i id="osIcon" class="fa-brands fa-apple mr-2 text-lg"></i> <span id="osText">Get Whis for macOS</span>
        </button>
        <button onclick="document.getElementById('showcase').scrollIntoView({behavior:'smooth'})" class="inline-flex items-center justify-center rounded-xl px-6 py-3 text-sm font-semibold bg-white/10 hover:bg-white/20 border border-white/10">See It In Action</button>
      </div>
    </div>
  </header>

  <!-- SHOWCASE: Ultra video grid (FIT: contain) -->
  <section id="showcase" class="relative py-10 md:py-16">
    <div class="max-w-[1400px] mx-auto px-4 md:px-6">
      <div class="grid grid-cols-1 lg:grid-cols-5 gap-4 md:gap-6">
        <!-- BIG LEFT -->
        <article class="lg:col-span-3 rounded-3xl overflow-hidden glass shadow-luxe">
          <div class="video-wrap aspect-[16/9] md:aspect-[21/9]">
            <video class="video-frame" src="visual.mp4" poster="visual_poster.jpg" muted playsinline preload="metadata" loop></video>
            <div class="absolute bottom-0 left-0 right-0 p-5 md:p-6 bg-gradient-to-t from-black/60 to-transparent">
              <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/10 text-[11px] uppercase tracking-widest border border-white/15">Mode: Reading Screen</div>
              <h3 class="mt-3 text-lg md:text-2xl font-semibold">See. Understand. Solve.</h3>
            </div>
          </div>
        </article>
        <!-- RIGHT TOP -->
        <article class="lg:col-span-2 rounded-3xl overflow-hidden glass shadow-luxe">
          <div class="video-wrap aspect-[16/9] md:aspect-[16/10]">
            <video class="video-frame" src="text.mp4" poster="text_poster.jpg" muted playsinline preload="metadata" loop></video>
            <div class="absolute bottom-0 left-0 right-0 p-5 md:p-6 bg-gradient-to-t from-black/60 to-transparent">
              <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/10 text-[11px] uppercase tracking-widest border border-white/15">Mode: Generating Code</div>
              <h3 class="mt-3 text-lg md:text-2xl font-semibold">Before They Finish Asking.</h3>
            </div>
          </div>
        </article>
        <!-- RIGHT BOTTOM -->
        <article class="lg:col-span-2 rounded-3xl overflow-hidden glass shadow-luxe">
          <div class="video-wrap aspect-[16/9] md:aspect-[21/9]">
            <video class="video-frame" src="audio.mp4" poster="audio_poster.jpg" muted playsinline preload="metadata" loop></video>
            <div class="absolute bottom-0 left-0 right-0 p-5 md:p-6 bg-gradient-to-t from-black/60 to-transparent">
              <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/10 text-[11px] uppercase tracking-widest border border-white/15">Mode: Listening</div>
              <h3 class="mt-3 text-lg md:text-2xl font-semibold">Capture Every Word. No Panic.</h3>
            </div>
          </div>
        </article>
      </div>

      <!-- marquee brands (subtle) -->
      <div class="mt-10 md:mt-14 opacity-80">
        <div class="relative overflow-hidden rounded-2xl glass">
          <div class="flex gap-16 whitespace-nowrap animate-[marquee_36s_linear_infinite] will-change-transform py-4 px-6">
            <span class="text-slate-400 text-sm md:text-base">Trusted at</span>
            <i class="fa-brands fa-google text-xl md:text-2xl"></i>
            <i class="fa-brands fa-amazon text-xl md:text-2xl"></i>
            <i class="fa-brands fa-meta text-xl md:text-2xl"></i>
            <i class="fa-brands fa-microsoft text-xl md:text-2xl"></i>
            <i class="fa-brands fa-uber text-xl md:text-2xl"></i>
            <i class="fa-brands fa-apple text-xl md:text-2xl"></i>
            <i class="fa-brands fa-nvidia text-xl md:text-2xl"></i>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- HOW IT WORKS -->
  <section id="how" class="py-20 md:py-28 border-t border-white/5 bg-gradient-to-b from-obsidian to-ink">
    <div class="max-w-6xl mx-auto px-6">
      <div class="text-center mb-14">
        <h2 class="text-3xl md:text-4xl font-semibold tracking-tight">The Unfair Advantage</h2>
        <p class="text-slate-500 mt-2">Technology designed to make you look like a genius.</p>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6">
        <div class="glass rounded-3xl p-6 md:p-8 hover:bg-white/[0.04] transition">
          <div class="w-12 h-12 rounded-xl bg-white/10 border border-white/15 flex items-center justify-center text-accent mb-5"><i class="fa-solid fa-bolt"></i></div>
          <h3 class="text-white font-semibold mb-2">Totally Invisible</h3>
          <p class="text-sm text-slate-400">Share your screen with confidence. Whis hides from screen‑sharing tools. You see the answer. They see nothing.</p>
        </div>
        <div class="glass rounded-3xl p-6 md:p-8 hover:bg-white/[0.04] transition">
          <div class="w-12 h-12 rounded-xl bg-white/10 border border-white/15 flex items-center justify-center text-red-300 mb-5"><i class="fa-solid fa-ban"></i></div>
          <h3 class="text-white font-semibold mb-2">Zero Trace</h3>
          <p class="text-sm text-slate-400">No dock icon. No taskbar. RAM‑only processing. As if it never existed.</p>
        </div>
        <div class="glass rounded-3xl p-6 md:p-8 hover:bg-white/[0.04] transition">
          <div class="w-12 h-12 rounded-xl bg-white/10 border border-white/15 flex items-center justify-center text-emerald-300 mb-5"><i class="fa-solid fa-microphone-lines"></i></div>
          <h3 class="text-white font-semibold mb-2">Instant Answers</h3>
          <p class="text-sm text-slate-400">Whis listens live and drafts the solution before the interviewer stops talking.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- SECURITY -->
  <section id="security" class="py-20 md:py-28 bg-obsidian border-t border-white/5 relative overflow-hidden">
    <div class="max-w-6xl mx-auto px-6 grid grid-cols-1 lg:grid-cols-2 gap-10 lg:gap-16">
      <div class="space-y-6">
        <h2 class="text-3xl md:text-4xl font-semibold tracking-tight">Your Secret is Safe.</h2>
        <p class="text-slate-400 text-base md:text-lg">We know the risks. That's why we built a privacy‑first architecture. <strong class="text-white">No footprints. No guessing.</strong></p>
        <div class="space-y-5">
          <div class="flex gap-4">
            <div class="w-9 h-9 rounded-full bg-white/5 border border-white/10 grid place-items-center"><i class="fa-solid fa-shield-halved text-emerald-400 text-sm"></i></div>
            <div>
              <h4 class="text-white text-sm font-medium">Nothing Saved</h4>
              <p class="text-xs md:text-sm text-slate-500">Processed in RAM. Deleted instantly. We keep no logs.</p>
            </div>
          </div>
          <div class="flex gap-4">
            <div class="w-9 h-9 rounded-full bg-white/5 border border-white/10 grid place-items-center"><i class="fa-solid fa-lock text-emerald-400 text-sm"></i></div>
            <div>
              <h4 class="text-white text-sm font-medium">Undetectable</h4>
              <p class="text-xs md:text-sm text-slate-500">Bypasses standard detection methods. Quiet. Invisible.</p>
            </div>
          </div>
        </div>
      </div>
      <div>
        <div class="glass rounded-2xl p-1 shadow-luxe">
          <div class="bg-black/80 rounded-xl p-6 md:p-8 border border-white/5">
            <div class="flex justify-between items-center mb-6 text-[10px] md:text-xs text-slate-500 uppercase tracking-widest font-mono">
              <span>Stealth Status</span>
              <span class="text-emerald-500 flex items-center gap-2"><span class="w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"></span> Active</span>
            </div>
            <div class="space-y-3 font-mono text-[10px] md:text-xs">
              <div class="flex justify-between items-center p-2 rounded hover:bg-white/5 transition"><span class="text-slate-400">Audio Stream</span><span class="text-emerald-400">Encrypted</span></div>
              <div class="flex justify-between items-center p-2 rounded hover:bg-white/5 transition"><span class="text-slate-400">Screenshare Visibility</span><span class="text-purple-400">Hidden</span></div>
              <div class="flex justify-between items-center p-2 rounded hover:bg-white/5 transition"><span class="text-slate-400">Server Logs</span><span class="text-red-400">Deleted</span></div>
              <div class="flex justify-between items-center p-2 rounded hover:bg-white/5 transition"><span class="text-slate-400">User Identity</span><span class="text-sky-400">Anonymous</span></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ -->
  <section id="faq" class="py-16 md:py-24 border-t border-white/5 bg-ink">
    <div class="max-w-4xl mx-auto px-6">
      <h2 class="text-2xl md:text-3xl font-semibold mb-6">Questions, answered.</h2>
      <div class="divide-y divide-white/10">
        <details class="group py-5">
          <summary class="cursor-pointer list-none flex items-center justify-between text-slate-300 hover:text-white">
            <span>Is it detectable on screenshare?</span>
            <i class="fa-solid fa-plus group-open:rotate-45 transition"></i>
          </summary>
          <p class="mt-3 text-sm text-slate-400">No. Overlay uses compositing paths that are not captured by common meeting tools.</p>
        </details>
        <details class="group py-5">
          <summary class="cursor-pointer list-none flex items-center justify-between text-slate-300 hover:text-white">
            <span>Do you store any audio or screen data?</span>
            <i class="fa-solid fa-plus group-open:rotate-45 transition"></i>
          </summary>
          <p class="mt-3 text-sm text-slate-400">No. Processing is in RAM; buffers are disposed immediately after response generation.</p>
        </details>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="border-t border-white/5 py-16 bg-obsidian relative">
    <div class="max-w-7xl mx-auto px-6 text-center">
      <h3 class="text-white font-medium text-xl mb-4">Don't let them reject you again.</h3>
      <button onclick="openDownloadModal()" class="mb-8 px-6 py-3 rounded-full bg-white/10 border border-white/10 hover:bg-white hover:text-black transition text-xs font-bold uppercase tracking-widest">Get Whis Now</button>
      <div class="text-xs text-slate-600 mb-6">&copy; 2025 Whis AI.</div>
      <div class="flex flex-wrap justify-center gap-6 md:gap-8 text-xs font-medium text-slate-500">
        <a href="/pricing" class="hover:text-white transition">Pricing</a>
        <a href="/contact" class="hover:text-white transition">Contact</a>
        <a href="/terms" class="hover:text-white transition">Terms</a>
        <a href="/privacy" class="hover:text-white transition">Privacy</a>
      </div>
    </div>
    <!-- sticky bottom bar -->
    <div class="fixed bottom-4 left-1/2 -translate-x-1/2 z-40">
      <div class="glass rounded-full px-3 py-2 border border-white/10 shadow-luxe backdrop-blur-xl flex items-center gap-2">
        <span class="hidden sm:inline text-[11px] text-slate-300">Ready when you are</span>
        <button onclick="openDownloadModal()" class="px-4 py-2 rounded-full bg-white text-black text-[11px] font-bold">Download</button>
        <button id="cmdkOpen2" class="px-3 py-2 rounded-full bg-white/10 border border-white/10 text-[11px]">Quick Actions ⌘K</button>
      </div>
    </div>
  </footer>

  <!-- MODALS -->
  <div id="loginModal" class="fixed inset-0 bg-black/80 backdrop-blur-xl z-[100] hidden items-center justify-center p-4"><div class="glass rounded-2xl p-8 max-w-sm w-full text-center shadow-2xl relative"><button onclick="closeLoginModal()" class="absolute top-4 right-4 text-slate-500 hover:text-white"><i class="fa-solid fa-times"></i></button><h3 class="text-lg font-medium text-white mb-2">Welcome Back</h3><p class="text-sm text-slate-500 mb-6">Sign in to manage your subscription.</p><div id="googleBtnContainer" class="flex justify-center h-[44px]"></div></div></div>
  <div id="downloadModal" class="fixed inset-0 bg-black/80 backdrop-blur-xl z-[100] hidden items-center justify-center p-4"><div class="glass rounded-2xl p-8 max-w-md w-full shadow-2xl relative"><button onclick="closeDownloadModal()" class="absolute top-4 right-4 text-slate-600 hover:text-white"><i class="fa-solid fa-times"></i></button><h2 class="text-lg font-medium text-white mb-2">Start Winning.</h2><div class="space-y-3"><a id="macDl" href="#" class="flex items-center justify-between px-5 py-4 bg-white/5 border border-white/5 rounded-lg hover:bg-white/10 transition group"><span class="text-sm font-medium text-white"><i class="fa-brands fa-apple mr-3"></i> macOS</span><i class="fa-solid fa-download text-slate-500 group-hover:text-white"></i></a><a id="winDl" href="#" class="flex items-center justify-between px-5 py-4 bg-white/5 border border-white/5 rounded-lg hover:bg-white/10 transition group"><span class="text-sm font-medium text-white"><i class="fa-brands fa-windows mr-3"></i> Windows</span><i class="fa-solid fa-download text-slate-500 group-hover:text-white"></i></a></div></div></div>
  <div id="profileModal" class="fixed inset-0 bg-black/80 backdrop-blur-xl z-[100] hidden items-center justify-center p-4"><div class="bg-[#0A0A0A] border border-white/10 rounded-xl w-full max-w-md overflow-hidden relative shadow-2xl ring-1 ring-white/10"><div class="p-6 border-b border-white/5 flex justify-between items-center bg-white/5"><div class="flex items-center gap-3"><img id="modalUserAvatar" class="w-10 h-10 rounded-full bg-slate-800 object-cover" /><div class="font-medium text-white text-sm" id="modalUserName"></div></div><button onclick="closeProfileModal()" class="text-slate-600 hover:text-white"><i class="fa-solid fa-times"></i></button></div><div class="p-6 space-y-6"><div class="bg-white/5 border border-white/5 rounded-lg p-5"><div class="flex justify-between items-start mb-4"><div><p class="text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1">Current Subscription</p><h3 id="modalPlanName" class="text-xl font-bold text-white">Loading...</h3></div><span id="modalPlanStatus" class="px-2 py-1 rounded text-[10px] font-bold bg-emerald-500/20 text-emerald-400 border border-emerald-500/20">ACTIVE</span></div><div class="text-xs text-slate-400 flex justify-between border-t border-white/5 pt-3"><span>Valid Until:</span><span id="modalExpiryDate" class="text-white font-mono">--</span></div></div><button onclick="logout()" class="w-full py-3 rounded-lg border border-white/10 text-slate-400 hover:bg-white/5 hover:text-white transition text-xs font-bold uppercase tracking-wider">Sign Out</button></div></div></div>

  <!-- SCRIPTS -->
  <script>
    const BACKEND_URL = "https://whis-backend.onrender.com";
    const GOOGLE_CLIENT_ID = "91011354786-0giqfdd547vj6ojkk26qdj4jucl5v07p.apps.googleusercontent.com";

    const loginModal = document.getElementById('loginModal');
    const downloadModal = document.getElementById('downloadModal');
    const profileModal = document.getElementById('profileModal');
    const progress = document.getElementById('progress');

    let currentUser = null;

    document.addEventListener('DOMContentLoaded', () => {
      detectOS();
      checkUser();
      initVideoAutoplay();
      initScrollProgress();
    });

    function detectOS(){
      const p = navigator.platform?.toLowerCase() || '';
      const ua = navigator.userAgent?.toLowerCase() || '';
      const btn = document.getElementById('smartDownloadBtn') || document.getElementById('ctaPrimary');
      const icon = document.getElementById('osIcon');
      const text = document.getElementById('osText');

      const winLink = "https://github.com/syedwaseemfahad/whis-releases/releases/download/v.1.0.windows/Whis.Setup.1.0.1.exe";
      const macLink = "https://github.com/syedwaseemfahad/whis-releases/releases/download/v1.0.0/Whis-1.0.0-arm64.dmg";

      const isWin = p.includes('win') || ua.includes('win');
      if (icon && text) {
        if (isWin) { text.textContent = 'Get Whis for Windows'; icon.className = 'fa-brands fa-windows mr-2 text-lg'; }
        else { text.textContent = 'Get Whis for macOS'; icon.className = 'fa-brands fa-apple mr-2 text-lg'; }
      }
      btn && (btn.onclick = () => window.location.href = isWin ? winLink : macLink);
      const wd = document.getElementById('winDl'); if (wd) wd.href = winLink;
      const md = document.getElementById('macDl'); if (md) md.href = macLink;
    }

    function initVideoAutoplay(){
      const vids = document.querySelectorAll('video.video-frame');
      const io = new IntersectionObserver((entries)=>{
        entries.forEach(e=>{ if(e.isIntersecting){ e.target.muted = true; e.target.play().catch(()=>{}); } else { e.target.pause(); } })
      }, { threshold: .2 });
      vids.forEach(v=> io.observe(v));
    }

    function initScrollProgress(){
      const h = document.documentElement;
      const up = ()=>{ const st = h.scrollTop; const sh = h.scrollHeight - h.clientHeight; const pct = Math.max(0, Math.min(1, st/sh)); progress.style.width = (pct*100)+'%'; };
      document.addEventListener('scroll', up, { passive:true }); up();
    }

    // Auth UI
    function checkUser(){ const s = localStorage.getItem('whisUser'); if(s){ try{ currentUser = JSON.parse(s); updateNavUI(currentUser); } catch(e){ localStorage.removeItem('whisUser'); } } }
    function openLoginModal(){ loginModal.classList.remove('hidden'); loginModal.classList.add('flex'); if(window.google){ google.accounts.id.initialize({client_id:GOOGLE_CLIENT_ID, callback:handleGoogle}); google.accounts.id.renderButton(document.getElementById('googleBtnContainer'), { theme:'filled_black', size:'large', shape:'pill' }); } }
    function closeLoginModal(){ loginModal.classList.add('hidden'); loginModal.classList.remove('flex'); }
    function openDownloadModal(){ downloadModal.classList.remove('hidden'); downloadModal.classList.add('flex'); }
    function closeDownloadModal(){ downloadModal.classList.add('hidden'); downloadModal.classList.remove('flex'); }
    function openProfileModal(){ if(currentUser){ document.getElementById('modalUserAvatar').src = currentUser.avatarUrl; document.getElementById('modalUserName').innerText = currentUser.name; fetchFullUserData(currentUser.googleId); } profileModal.classList.remove('hidden'); profileModal.classList.add('flex'); }
    function closeProfileModal(){ profileModal.classList.add('hidden'); profileModal.classList.remove('flex'); }
    function logout(){ localStorage.removeItem('whisUser'); location.reload(); }
    function updateNavUI(u){ document.getElementById('signInBtn').style.display='none'; const trig = document.getElementById('userProfileTrigger'); trig.classList.remove('hidden'); trig.classList.add('flex'); document.getElementById('navUserAvatar').src = u.avatarUrl; }

    async function handleGoogle(res){ try{ const r = await fetch(`${BACKEND_URL}/api/auth/google`, { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ token: res.credential }) }); if(r.ok){ const d = await r.json(); if(d.success){ localStorage.setItem('whisUser', JSON.stringify(d.user)); currentUser = d.user; updateNavUI(currentUser); closeLoginModal(); fetchFullUserData(currentUser.googleId); } } } catch(e){} }

    async function fetchFullUserData(gid){ try{ const r = await fetch(`${BACKEND_URL}/api/user/status`, { headers: { 'x-google-id': gid } }); const d = await r.json(); const b = document.getElementById('navPlanBadge'); const mb = document.getElementById('modalPlanStatus'); if(d.active){ b.textContent = (d.tier==='pro_plus'?'ELITE':'PRO'); b.className = 'text-[9px] font-bold text-emerald-400 uppercase tracking-wider'; mb.textContent = 'ACTIVE'; mb.className = 'px-2 py-1 rounded text-[10px] font-bold bg-emerald-500/20 text-emerald-400 border border-emerald-500/20'; document.getElementById('modalExpiryDate').textContent = new Date(d.validUntil).toLocaleDateString(); } else { b.textContent = 'FREE'; b.className = 'text-[9px] font-bold text-slate-500 uppercase tracking-wider'; mb.textContent = 'INACTIVE'; mb.className = 'px-2 py-1 rounded text-[10px] font-bold bg-slate-500/20 text-slate-400 border border-slate-500/20'; document.getElementById('modalExpiryDate').textContent = 'Forever'; } document.getElementById('modalPlanName').textContent = d.tier==='pro_plus' ? 'Pro + Elite' : (d.tier==='pro' ? 'Pro Plan' : 'Starter Free'); } catch(e){} }
  </script>
</body>
</html>
