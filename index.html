<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-XXXXXXXXXX');
  </script>

  <meta charset="UTF-8" />
  <title>Whis-AI ‚Äì The Ultimate Interview Cheat Code</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />
  <meta name="description" content="The undetectable AI copilot that solves interview problems in real-time. Get the job, guaranteed.">
    
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: { 
            sans: ['SF Pro Display', 'Inter', '-apple-system', 'sans-serif'], 
            mono: ['JetBrains Mono', 'Fira Code', 'monospace'] 
          },
          colors: { 
            page: '#020202', 
            glass: 'rgba(255, 255, 255, 0.03)',
            accent: 'var(--accent)',
          },
          animation: { 
            'scroll': 'scroll 40s linear infinite',
            'float': 'float 8s ease-in-out infinite',
            'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
            'blob': 'blob 10s infinite',
            'pop-in': 'popIn 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards',
            'timer': 'timerPulse 1s linear infinite',
            'shimmer': 'shimmer 3s linear infinite',
            'border-flow': 'borderFlow 6s linear infinite',
            'scan': 'scan 3s ease-in-out infinite',
          },
          keyframes: {
            scroll: { '0%': { transform: 'translateX(0)' }, '100%': { transform: 'translateX(-100%)' } },
            float: { '0%, 100%': { transform: 'translateY(0)' }, '50%': { transform: 'translateY(-10px)' } },
            blob: {
              '0%': { transform: 'translate(0px, 0px) scale(1)' },
              '33%': { transform: 'translate(30px, -50px) scale(1.1)' },
              '66%': { transform: 'translate(-20px, 20px) scale(0.9)' },
              '100%': { transform: 'translate(0px, 0px) scale(1)' },
            },
            popIn: {
                '0%': { opacity: '0', transform: 'scale(0.9) translateY(20px)' },
                '100%': { opacity: '1', transform: 'scale(1) translateY(0)' }
            },
            timerPulse: {
                '0%, 100%': { opacity: '1', transform: 'scale(1)' },
                '50%': { opacity: '0.8', transform: 'scale(0.95)' }
            },
            shimmer: {
                '0%': { backgroundPosition: '200% 0' },
                '100%': { backgroundPosition: '-200% 0' }
            },
            borderFlow: {
                '0%': { backgroundPosition: '0% 50%' },
                '50%': { backgroundPosition: '100% 50%' },
                '100%': { backgroundPosition: '0% 50%' }
            },
            scan: {
                '0%': { top: '0%', opacity: '0' },
                '10%': { opacity: '1' },
                '90%': { opacity: '1' },
                '100%': { top: '100%', opacity: '0' }
            }
          }
        }
      }
    }
  </script>
    
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
  <script src="https://www.paypal.com/sdk/js?client-id=AWt11sXML_MxwSp4shnL-JDfXlqWe_wO7d_VVCvRNT00Ws-dHCTywlD9La4aWpNNJbfz-SGuWggCNgip&currency=USD"></script>
    
  <style>
    /* --- CORE AESTHETICS --- */
    :root {
        --accent: #00f2ff;
        --accent-glow: rgba(0, 242, 255, 0.4);
        --gold: #D4AF37; 
    }
    
    @property --accent {
        syntax: '<color>';
        initial-value: #00f2ff;
        inherits: true;
    }

    html {
        scroll-behavior: smooth;
        -webkit-overflow-scrolling: touch;
    }

    body { 
        background-color: #020202; 
        color: #e2e8f0; 
        font-family: 'Inter', sans-serif; 
        overflow-x: hidden; 
        padding-bottom: 90px;
        -webkit-font-smoothing: antialiased;
        animation: colorCycle 60s infinite linear;
    }

    /* OPTIMIZED GRAIN OVERLAY (CSS only, no SVG filter) */
    .grain-overlay {
        position: fixed;
        top: 0; left: 0; width: 100%; height: 100%;
        background-image: url("https://upload.wikimedia.org/wikipedia/commons/7/76/Noise_pattern_with_cross-correlation_coefficient_rho_zero.png");
        background-size: 150px;
        opacity: 0.05;
        pointer-events: none;
        z-index: 50;
    }

    /* Typography Adjustments */
    p { font-size: 16px; line-height: 1.7; letter-spacing: 0.01em; }
    @media (min-width: 768px) { p { font-size: 18px; } }

    /* GPU Acceleration for smoother animations */
    .animate-blob, .physics-card, .carousel-item {
        will-change: transform;
        transform: translateZ(0);
    }

    @keyframes colorCycle {
        0% { --accent: #00f2ff; --accent-glow: rgba(0, 242, 255, 0.25); }
        33% { --accent: #a78bfa; --accent-glow: rgba(167, 139, 250, 0.25); }
        66% { --accent: #34d399; --accent-glow: rgba(52, 211, 153, 0.25); }
        100% { --accent: #00f2ff; --accent-glow: rgba(0, 242, 255, 0.25); }
    }

    /* --- UTILITIES --- */
    .text-accent { color: var(--accent); transition: color 1.5s; }
    .bg-accent { background-color: var(--accent); transition: background-color 1.5s; }
    .border-accent { border-color: var(--accent); transition: border-color 1.5s; }
    .shadow-accent { box-shadow: 0 0 30px var(--accent-glow); transition: box-shadow 1.5s; }
    
    .glass-panel {
        background: rgba(255, 255, 255, 0.02);
        backdrop-filter: blur(10px); 
        -webkit-backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.05);
    }

    /* --- PHYSICS CARD (OPTIMIZED) --- */
    .physics-card {
        background: linear-gradient(145deg, rgba(20,20,20,0.4) 0%, rgba(5,5,5,0.95) 100%);
        backdrop-filter: blur(10px); 
        -webkit-backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.06);
        border-radius: 24px;
        position: relative;
        overflow: hidden;
        transition: transform 0.2s cubic-bezier(0.2, 0.8, 0.2, 1), border-color 0.2s;
        box-shadow: 0 4px 30px rgba(0, 0, 0, 0.2);
    }
    .physics-card::before {
        content: "";
        position: absolute;
        top: 0; left: 0; right: 0; bottom: 0;
        background: radial-gradient(600px circle at var(--mouse-x, 50%) var(--mouse-y, 50%), rgba(255, 255, 255, 0.04), transparent 40%);
        opacity: 0;
        transition: opacity 0.3s;
        pointer-events: none;
        z-index: 2;
    }
    .physics-card:hover::before { opacity: 1; }
    .physics-card:hover { 
        border-color: rgba(255, 255, 255, 0.15); 
        transform: translateY(-2px); 
    }

    /* --- INTRO ANIMATION --- */
    .intro-overlay {
        position: fixed; inset: 0; z-index: 9999;
        background: #000;
        display: flex; align-items: center; justify-content: center;
        pointer-events: none;
        transition: opacity 0.8s ease-out;
    }
    .intro-text {
        font-size: 2.5rem; font-weight: 200; letter-spacing: -0.02em;
        background: linear-gradient(to bottom, #fff, #888); -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        opacity: 0; transform: scale(0.98); transition: all 1s cubic-bezier(0.16, 1, 0.3, 1);
        text-align: center;
    }
    .intro-active { opacity: 1; transform: scale(1); }

    /* --- CAROUSEL 3D (Refined) --- */
    .carousel-container { 
        perspective: 1500px; 
        display: flex; justify-content: center; align-items: center; 
        height: 250px; position: relative; margin: 20px 0;
    }
    @media (min-width: 768px) { .carousel-container { height: 500px; margin: 0; } }
    
    .carousel-item { 
        position: absolute; width: 90%; aspect-ratio: 16/9; 
        transition: all 0.8s cubic-bezier(0.2, 0.8, 0.2, 1); 
        border-radius: 20px; overflow: hidden; background: #000; 
        border: 1px solid rgba(255,255,255,0.08); 
        box-shadow: 0 30px 60px -12px rgba(0, 0, 0, 0.9);
        display: flex; align-items: center; justify-content: center;
    }
    @media (min-width: 768px) { .carousel-item { width: 70%; } }
    
    .item-center { z-index: 30; transform: translate3d(0,0,0) scale(1); opacity: 1; border-color: rgba(255,255,255,0.2); box-shadow: 0 0 80px rgba(0,0,0,0.8); }
    .item-left { z-index: 10; transform: translate3d(-10%, 0, -100px) scale(0.85); opacity: 0.3; filter: grayscale(100%); }
    .item-right { z-index: 10; transform: translate3d(10%, 0, -100px) scale(0.85); opacity: 0.3; filter: grayscale(100%); }
    @media (min-width: 768px) {
        .item-left { transform: translate3d(-55%, 0, -300px) rotateY(20deg) scale(0.85); }
        .item-right { transform: translate3d(55%, 0, -300px) rotateY(-20deg) scale(0.85); }
    }
    .item-hidden { z-index: 0; opacity: 0; transform: scale(0.5); pointer-events: none;}
    
    /* ANIMATION UTILS FOR CAROUSEL CONTENT */
    .scan-line {
        position: absolute; top: 0; left: 0; width: 100%; height: 2px;
        background: var(--accent);
        box-shadow: 0 0 10px var(--accent);
        animation: scan 3s ease-in-out infinite;
    }
    .waveform-bar {
        width: 6px; background: var(--accent); border-radius: 99px;
        animation: wave 1s ease-in-out infinite;
    }
    @keyframes wave {
        0%, 100% { height: 10%; opacity: 0.5; }
        50% { height: 80%; opacity: 1; box-shadow: 0 0 10px var(--accent); }
    }

    /* --- CODE EDITOR --- */
    pre { white-space: pre-wrap; margin: 0; font-family: 'JetBrains Mono', monospace; overflow-x: hidden; }
    .keyword { color: #c678dd; } .function { color: #61afef; } .string { color: #98c379; } .number { color: #d19a66; } 

    /* --- UI ELEMENTS --- */
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

    /* PREMIUM PRICING SPECIFIC */
    .pricing-elite { position: relative; overflow: hidden; }
    .pricing-elite::before {
        content: ''; position: absolute; inset: -1px; border-radius: 25px;
        /* Golden/Cyan flow */
        background: linear-gradient(45deg, transparent, rgba(212, 175, 55, 0.3), var(--accent), rgba(212, 175, 55, 0.3), transparent);
        z-index: -1; animation: border-flow 6s linear infinite; opacity: 0.6;
        will-change: background-position;
    }
    
    /* Text Gradients */
    .text-gradient-premium {
        background: linear-gradient(to bottom, #ffffff 10%, #9ca3af 100%);
        -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    }
    
    .text-gradient-gold {
        background: linear-gradient(to right, #FDB931, #FFD700, #FDB931);
        -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    }

    .faq-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; }
    .faq-active .faq-content { max-height: 300px; }
    .faq-active i { transform: rotate(180deg); }

    .snap-center { scroll-snap-align: center; }

    /* CELEBRATION MODAL UPDATED */
    .celebration-bg {
        background: radial-gradient(circle at center, #1e1b4b 0%, #000000 80%);
    }
    .celebration-glow {
        text-shadow: 0 0 30px rgba(255, 215, 0, 0.5);
    }
    .shine-button {
        position: relative;
        overflow: hidden;
    }
    .shine-button::after {
        content: '';
        position: absolute;
        top: 0; left: -100%;
        width: 100%; height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
        animation: shine 3s infinite;
    }
    @keyframes shine {
        100% { left: 100%; }
    }
  </style>
</head>
<body>

  <div class="grain-overlay"></div>

  <div id="intro-layer" class="intro-overlay">
      <h1 id="intro-text" class="intro-text">Crush The Interview.<br><span class="text-accent text-3xl md:text-5xl mt-4 block font-light">Welcome to Whis-AI</span></h1>
  </div>

  <div class="fixed inset-0 z-0 pointer-events-none overflow-hidden">
      <div class="absolute top-[-20%] left-[-10%] w-[70vw] h-[70vh] bg-[var(--accent)] rounded-full blur-[100px] opacity-[0.04] animate-blob"></div>
      <div class="absolute bottom-[-20%] right-[-10%] w-[60vw] h-[60vh] bg-blue-900 rounded-full blur-[100px] opacity-[0.06] animate-blob" style="animation-delay: 2s"></div>
  </div>

  <div id="celebrationModal" class="fixed inset-0 z-[1000] hidden items-center justify-center celebration-bg backdrop-blur-xl transition-opacity duration-500 p-4">
      <div class="absolute inset-0 bg-black opacity-20"></div>
      
      <button onclick="closeCelebration()" class="absolute top-6 right-6 md:top-8 md:right-8 text-white/50 hover:text-white transition transform hover:scale-110 z-50 bg-black/20 p-2 rounded-full border border-white/10 backdrop-blur-md">
          <i class="fa-solid fa-xmark text-2xl md:text-3xl"></i>
      </button>

      <div class="absolute inset-0 overflow-hidden pointer-events-none">
          <div class="absolute top-1/4 left-1/4 w-[300px] md:w-[500px] h-[300px] md:h-[500px] bg-purple-600/10 rounded-full blur-[80px] animate-pulse"></div>
          <div class="absolute bottom-1/4 right-1/4 w-[300px] md:w-[500px] h-[300px] md:h-[500px] bg-yellow-500/10 rounded-full blur-[80px] animate-pulse" style="animation-delay: 1s"></div>
      </div>
      
      <div class="relative z-10 text-center p-6 md:p-8 max-w-xl w-full transform scale-0 animate-pop-in flex flex-col items-center bg-black/40 border border-white/10 rounded-3xl shadow-[0_0_60px_rgba(255,215,0,0.1)] backdrop-blur-xl">
          
          <div class="w-16 h-16 md:w-24 md:h-24 mb-6 md:mb-8 rounded-full border-2 md:border-4 border-yellow-500/30 flex items-center justify-center relative bg-black/40 backdrop-blur-md animate-timer shadow-[0_0_20px_rgba(255,215,0,0.2)]">
              <span id="countdownTimer" class="text-2xl md:text-4xl font-mono font-bold text-transparent bg-clip-text bg-gradient-to-b from-yellow-300 to-yellow-600">7</span>
          </div>

          <div class="w-20 h-20 md:w-28 md:h-28 mx-auto mb-4 md:mb-6 bg-gradient-to-br from-yellow-500/10 to-purple-600/10 rounded-full flex items-center justify-center border border-white/10 shadow-[0_0_40px_rgba(255,215,0,0.15)]">
              <i class="fa-solid fa-gift text-3xl md:text-5xl text-yellow-400 animate-bounce drop-shadow-[0_0_15px_rgba(255,215,0,0.6)]"></i>
          </div>
          
          <h2 class="text-3xl md:text-6xl font-light text-white mb-2 celebration-glow uppercase italic tracking-tighter">Congratulations!</h2>
          <p class="text-lg md:text-2xl text-transparent bg-clip-text bg-gradient-to-r from-yellow-100 via-white to-yellow-100 font-bold mb-4 md:mb-6 tracking-wide drop-shadow-sm">You Unlocked 3 Free Sessions</p>
          
          <div class="bg-gradient-to-br from-white/5 to-transparent border border-white/10 rounded-2xl p-4 md:p-6 mb-6 md:mb-8 backdrop-blur-md w-full shadow-inner">
              <p class="text-slate-300 text-xs md:text-sm leading-relaxed font-light">
                  Your account has been flagged for a <span class="text-yellow-400 font-bold drop-shadow-[0_0_10px_rgba(255,215,0,0.3)]">Special Starter Boost</span>. 
                  Experience the full power of Whis-AI elite mode completely free.
              </p>
          </div>

          <button onclick="closeCelebration()" class="shine-button w-full py-4 md:py-5 rounded-2xl bg-gradient-to-r from-yellow-500 via-yellow-400 to-yellow-600 text-black text-sm md:text-lg font-black uppercase tracking-widest shadow-[0_0_40px_rgba(255,215,0,0.25)] hover:scale-[1.02] transition duration-500 border border-yellow-300/30">
              Claim Reward Now
          </button>
      </div>
  </div>

  <nav class="fixed top-0 w-full z-50 h-[80px] flex items-center justify-center bg-black/50 backdrop-blur-xl border-b border-white/5 transition-all duration-300">
    <div class="w-full max-w-7xl px-6 flex items-center justify-between">
      <a href="/" class="flex items-center gap-3 group">
        <div class="w-9 h-9 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center group-hover:border-accent/50 transition duration-500">
            <i class="fa-solid fa-bolt text-accent text-sm drop-shadow-[0_0_5px_var(--accent)]"></i>
        </div>
        <span class="text-xl font-bold tracking-tight text-white group-hover:text-accent transition duration-500">Whis-AI</span>
      </a>
      
      <div class="hidden md:flex items-center gap-1 bg-white/5 p-1.5 rounded-full border border-white/5 backdrop-blur-md">
        <a href="#features" class="px-6 py-2 text-xs font-medium text-slate-400 hover:text-white hover:bg-white/5 rounded-full transition duration-300">Features</a>
        <a href="#demo" class="px-6 py-2 text-xs font-medium text-slate-400 hover:text-white hover:bg-white/5 rounded-full transition duration-300">How it Works</a>
        <a href="#pricing" class="px-6 py-2 text-xs font-medium text-slate-400 hover:text-white hover:bg-white/5 rounded-full transition duration-300">Pricing</a>
      </div>

      <div class="flex items-center gap-4">
          <button onclick="openLoginModal()" id="signInBtn" class="text-xs font-bold text-slate-400 hover:text-white transition px-4 tracking-wide">Sign In</button>
          
          <button onclick="openDownloadModal()" class="hidden md:flex items-center gap-2 group relative px-6 py-2.5 rounded-full bg-white text-black text-xs font-bold overflow-hidden shadow-[0_0_30px_rgba(255,255,255,0.1)] hover:shadow-accent/40 transition duration-500">
             <span class="relative z-10 tracking-wide">Get 3 Free Elite Sessions</span>
             <div class="absolute inset-0 bg-accent opacity-0 group-hover:opacity-100 transition duration-500"></div>
          </button>
          
          <button onclick="openProfileModal()" id="userProfileTrigger" class="hidden items-center gap-3 bg-white/5 pr-4 pl-1 py-1 rounded-full border border-white/10 hover:border-white/30 transition">
            <img id="navUserAvatar" src="" class="w-8 h-8 rounded-full bg-slate-800 object-cover" />
            <span id="navPlanBadge" class="text-[9px] font-bold text-slate-400 uppercase tracking-wide">FREE</span>
          </button>
      </div>
    </div>
  </nav>

  <div class="md:hidden fixed bottom-0 left-0 right-0 z-50 bg-[#050505]/90 backdrop-blur-xl border-t border-white/10 p-4 pb-8 flex flex-col gap-3 shadow-[0_-10px_40px_rgba(0,0,0,0.8)]">
      <div class="text-[10px] text-center text-accent uppercase tracking-widest font-bold mb-1 animate-pulse drop-shadow-[0_0_5px_var(--accent)]">‚ö° High Demand: 150+ Users Online</div>
      <button onclick="openDownloadModal()" class="w-full py-4 rounded-xl bg-white text-black text-sm font-bold text-center shadow-[0_0_20px_rgba(255,255,255,0.15)] uppercase tracking-widest hover:brightness-110 transition">
          Start Free Interview
      </button>
  </div>

  <a href="https://wa.me/9092435258" target="_blank" class="fixed bottom-32 right-4 z-40 bg-[#25D366] w-12 h-12 rounded-full flex items-center justify-center shadow-lg hover:scale-110 transition md:bottom-8 group">
      <i class="fa-brands fa-whatsapp text-white text-2xl"></i>
      <span class="absolute right-14 bg-black/80 border border-white/10 text-white text-[10px] font-bold py-1 px-3 rounded whitespace-nowrap opacity-0 group-hover:opacity-100 transition duration-300 pointer-events-none">24/7 Support</span>
  </a>

  <section class="relative pt-32 md:pt-56 pb-20 flex flex-col items-center overflow-hidden">
    <div class="relative z-10 text-center max-w-6xl px-6 mb-2 flex flex-col items-center">
      
      <div class="mb-8 md:mb-10 inline-flex items-center gap-3 px-5 py-2 rounded-full bg-white/5 border border-white/10 text-[10px] font-bold text-slate-300 backdrop-blur-md shadow-[0_0_20px_rgba(0,0,0,0.5)]">
          <span class="relative flex h-2 w-2">
            <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span>
            <span class="relative inline-flex rounded-full h-2 w-2 bg-red-500"></span>
          </span>
          <span id="signup-badge-text" class="tracking-wide">üî• 150+ candidates active now</span>
      </div>
      
      <h1 class="text-5xl md:text-8xl font-light tracking-tight leading-[1] mb-8 md:mb-10 text-transparent bg-clip-text bg-gradient-to-b from-white via-white to-gray-500 drop-shadow-2xl">
        Never Freeze In An<br>
        <span class="text-accent drop-shadow-[0_0_30px_var(--accent-glow)] font-normal">Interview Again.</span>
      </h1>
      
      <p class="text-lg md:text-xl text-slate-400 max-w-2xl mx-auto mb-10 md:mb-12 leading-relaxed font-light px-4">
        The tool you need to get the offer. It sees the screen. It hears the question. It writes the code for you. 
        <span class="text-white font-medium block mt-3">Undetectable. Fast. Flawless.</span>
      </p>

      <div class="flex flex-col items-center gap-6 w-full md:w-auto">
        <div class="bg-gradient-to-r from-yellow-500/10 to-transparent border border-yellow-500/20 px-6 py-2.5 rounded-full flex items-center gap-2 shadow-[0_0_15px_rgba(255,215,0,0.1)]">
            <i class="fa-solid fa-crown text-[#FFD700] text-xs drop-shadow-[0_0_5px_rgba(255,215,0,0.5)]"></i>
            <span class="text-[#FFD700] text-[10px] font-bold tracking-widest uppercase">Limited Offer: 3 Free Elite Sessions</span>
        </div>

        <button id="heroDownloadBtn" onclick="openDownloadModal()" class="group w-full md:w-auto px-12 py-5 rounded-2xl bg-white text-black text-sm font-bold hover:scale-[1.02] transition duration-300 shadow-[0_0_50px_rgba(255,255,255,0.15)] flex justify-center items-center gap-4 border border-white/20 tracking-widest uppercase">
            <div class="flex items-center gap-4 border-r border-black/10 pr-4 mr-1">
                 <i class="fa-brands fa-apple text-xl"></i>
                 <i class="fa-brands fa-windows text-xl"></i>
            </div>
            Download Now
        </button>
      </div>

      <div class="flex flex-wrap justify-center gap-6 md:gap-10 mt-12 text-[10px] text-slate-500 font-mono uppercase tracking-widest">
          <span class="flex items-center gap-2"><i class="fa-solid fa-check text-accent"></i> No Credit Card</span>
          <span class="flex items-center gap-2"><i class="fa-solid fa-check text-accent"></i> 100% Undetectable</span>
          <span class="flex items-center gap-2"><i class="fa-solid fa-check text-accent"></i> Mac & Windows</span>
      </div>
    </div>

    <div class="w-full max-w-7xl mx-auto mt-16 md:mt-24 mb-12 md:mb-20 relative scroller-mask px-6 opacity-30 z-30 pointer-events-none">
        <div class="flex overflow-hidden group">
            <div class="flex gap-20 animate-scroll group-hover:[animation-play-state:paused] items-center text-white transition duration-500">
                <i class="fa-brands fa-google text-4xl"></i><i class="fa-brands fa-meta text-4xl"></i><i class="fa-brands fa-amazon text-4xl"></i>
                <i class="fa-brands fa-apple text-4xl"></i><i class="fa-brands fa-uber text-4xl"></i><i class="fa-brands fa-microsoft text-4xl"></i>
                <i class="fa-brands fa-stripe text-4xl"></i><i class="fa-brands fa-airbnb text-4xl"></i><i class="fa-brands fa-tiktok text-4xl"></i>
                <i class="fa-brands fa-google text-4xl"></i><i class="fa-brands fa-meta text-4xl"></i>
            </div>
        </div>
    </div>

    <div class="w-full relative z-20">
        <div class="carousel-container" id="carouselContainer"></div>
        <div class="text-center mt-8">
              <p id="featureLabel" class="text-[10px] font-mono text-accent uppercase tracking-[0.5em] animate-pulse drop-shadow-[0_0_5px_var(--accent)]">SYSTEM INITIALIZED</p>
        </div>
    </div>
  </section>

  <section id="demo" class="py-20 md:py-32 border-t border-white/5 bg-[#030303] relative">
      <div class="absolute top-0 inset-x-0 h-px bg-gradient-to-r from-transparent via-white/10 to-transparent"></div>
      
      <div class="max-w-7xl mx-auto px-6">
          <div class="grid lg:grid-cols-2 gap-12 md:gap-20 items-center">
              <div class="space-y-8 md:space-y-10">
                  <h2 class="text-4xl md:text-6xl font-light text-white tracking-tight">Real-time<br><span class="text-slate-600 font-extralight">Coding Genius.</span></h2>
                  <p class="text-slate-400 text-base md:text-lg font-light leading-relaxed">
                      Whis listens to the audio stream and captures your screen context. It identifies the algorithm, handles edge cases, and types the optimal solution directly into your IDE.
                  </p>
                  
                  <div class="physics-card p-8 bg-white/5">
                      <div class="flex items-center gap-4 mb-6">
                          <div class="flex h-3 w-3 relative">
                            <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span>
                            <span class="relative inline-flex rounded-full h-3 w-3 bg-red-500"></span>
                          </div>
                          <span class="text-[10px] font-mono text-white/70 uppercase tracking-widest">Audio Stream Active</span>
                      </div>
                      <div class="flex items-center gap-1 h-12 opacity-60">
                          <div class="w-1 bg-white rounded-full h-4 animate-pulse"></div>
                          <div class="w-1 bg-white rounded-full h-8 animate-pulse" style="animation-delay: 0.1s"></div>
                          <div class="w-1 bg-white rounded-full h-12 animate-pulse" style="animation-delay: 0.2s"></div>
                          <div class="w-1 bg-white rounded-full h-6 animate-pulse" style="animation-delay: 0.15s"></div>
                          <div class="w-1 bg-white rounded-full h-10 animate-pulse" style="animation-delay: 0.3s"></div>
                          <div class="w-1 bg-white rounded-full h-5 animate-pulse" style="animation-delay: 0.1s"></div>
                          <div class="w-1 bg-white rounded-full h-12 animate-pulse" style="animation-delay: 0.4s"></div>
                          <div class="w-1 bg-white rounded-full h-4 animate-pulse"></div>
                      </div>
                      <p class="mt-8 text-sm text-slate-400 italic border-l border-accent/50 pl-6 leading-relaxed">"Okay, let's optimize this using a sliding window approach to reduce complexity to O(n)..."</p>
                  </div>
              </div>

              <div class="physics-card p-0 bg-[#080808] border border-white/10 h-[450px] md:h-[550px] flex flex-col shadow-2xl shadow-black/80">
                  <div class="px-5 py-4 border-b border-white/5 flex justify-between items-center bg-white/5 backdrop-blur-md">
                      <div class="flex gap-2">
                        <div class="w-3 h-3 rounded-full bg-white/10"></div>
                        <div class="w-3 h-3 rounded-full bg-white/10"></div>
                        <div class="w-3 h-3 rounded-full bg-white/10"></div>
                      </div>
                      <div class="text-[10px] font-mono font-bold text-slate-500 flex gap-6">
                          <span class="text-accent drop-shadow-[0_0_5px_var(--accent)]">main.py</span>
                          <span class="opacity-50">Solution.cpp</span>
                          <span class="opacity-50">Service.java</span>
                      </div>
                  </div>
                  <div class="p-6 md:p-8 flex-grow overflow-x-auto relative no-scrollbar bg-[#050505]/50">
                      <pre id="code-display" class="text-xs md:text-sm leading-loose text-slate-300 font-mono"></pre>
                      <span id="cursor" class="absolute w-2 h-5 bg-accent animate-pulse inline-block align-middle ml-1 shadow-[0_0_10px_var(--accent)]"></span>
                  </div>
                  <div class="px-5 py-3 border-t border-white/5 text-[10px] text-green-400 font-mono bg-green-900/5 flex justify-between items-center">
                      <span class="flex items-center gap-2"><i class="fa-solid fa-circle-check"></i> 14/14 Test Cases Passed</span>
                      <span class="opacity-70">Runtime: 32ms (Beats 98%)</span>
                  </div>
              </div>
          </div>
      </div>
  </section>

  <section class="py-20 md:py-32 border-t border-white/5 bg-black relative overflow-hidden">
      <div class="max-w-5xl mx-auto px-6 text-center relative z-10">
          <div class="inline-block p-1.5 rounded-full border border-accent/20 bg-accent/5 px-5 mb-8 backdrop-blur-md">
              <span class="text-[10px] font-bold text-accent uppercase tracking-widest">üõ°Ô∏è Military-Grade Stealth</span>
          </div>
          <h2 class="text-4xl md:text-6xl font-light text-white mb-12 md:mb-16">They see nothing.<br>You see everything.</h2>
          
          <div class="grid md:grid-cols-2 gap-10 max-w-4xl mx-auto mb-16">
                <div class="group relative">
                    <div class="absolute -inset-1 bg-gradient-to-r from-red-600 to-pink-900 rounded-2xl blur opacity-10 group-hover:opacity-30 transition duration-1000"></div>
                    <div class="bg-[#0a0a0a] p-8 rounded-2xl border border-white/10 relative h-full">
                        <div class="flex justify-between items-center mb-6">
                            <p class="text-[10px] text-slate-500 uppercase font-bold tracking-widest">Interviewer View</p>
                            <i class="fa-solid fa-video text-slate-700"></i>
                        </div>
                        <div class="aspect-video bg-[#111] rounded-xl flex items-center justify-center border border-white/5 shadow-inner">
                            <i class="fa-solid fa-user text-slate-700 text-5xl"></i>
                        </div>
                        <p class="text-xs text-slate-500 mt-6 text-left leading-relaxed">Clean feed. No overlays. No process injection hooks. Looks exactly like a standard desktop share.</p>
                    </div>
                </div>

                <div class="group relative">
                    <div class="absolute -inset-1 bg-gradient-to-r from-cyan-500 to-blue-900 rounded-2xl blur opacity-20 group-hover:opacity-50 transition duration-1000"></div>
                    <div class="bg-[#0a0a0a] p-8 rounded-2xl border border-accent/30 relative h-full">
                          <div class="flex justify-between items-center mb-6">
                            <p class="text-[10px] text-accent uppercase font-bold tracking-widest">Your View</p>
                            <i class="fa-solid fa-eye text-accent"></i>
                        </div>
                        <div class="aspect-video bg-[#111] rounded-xl flex items-center justify-center relative overflow-hidden border border-white/5 shadow-inner">
                            <i class="fa-solid fa-user text-slate-700 text-5xl opacity-30"></i>
                            <div class="absolute right-0 top-0 bottom-0 w-2/5 bg-black/90 border-l border-accent/30 p-4 flex flex-col gap-3 backdrop-blur-sm">
                                <div class="h-1.5 w-full bg-accent/60 rounded-full shadow-[0_0_10px_var(--accent)]"></div>
                                <div class="h-1.5 w-2/3 bg-slate-800 rounded-full"></div>
                                <div class="h-1.5 w-3/4 bg-slate-800 rounded-full"></div>
                                <div class="h-20 w-full bg-slate-900/80 rounded border border-white/5 mt-2"></div>
                            </div>
                        </div>
                        <p class="text-xs text-white mt-6 text-left leading-relaxed">Live transcriptions. System design hints. Code snippets. All rendered in a secure overlay layer.</p>
                    </div>
                </div>
          </div>
          
          <div class="flex flex-wrap justify-center gap-8 md:gap-12 text-[10px] text-slate-500 font-mono uppercase tracking-widest">
                <span class="flex items-center gap-3"><i class="fa-solid fa-shield-halved"></i> No browser extensions</span>
                <span class="flex items-center gap-3"><i class="fa-solid fa-eye-slash"></i> Bypass Screen Capture APIs</span>
                <span class="flex items-center gap-3"><i class="fa-solid fa-ghost"></i> Ghost Dock Icon</span>
          </div>
      </div>
  </section>

  <section id="features" class="py-20 md:py-40 border-t border-white/5 bg-[#050505] relative">
      <div class="absolute top-0 right-0 w-[600px] h-[600px] bg-blue-900/5 rounded-full blur-[100px] pointer-events-none"></div>
      <div class="max-w-7xl mx-auto px-6 relative z-10">
          <h2 class="text-4xl font-light text-white mb-16 md:mb-24 text-center tracking-tight">The Unfair Advantage.</h2>
          
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8">
              <div class="physics-card p-8 transition group bg-white/5 hover:bg-white/10">
                  <div class="w-14 h-14 rounded-2xl bg-purple-500/5 flex items-center justify-center mb-8 group-hover:scale-110 transition border border-purple-500/10">
                      <i class="fa-solid fa-ghost text-2xl text-purple-300"></i>
                  </div>
                  <h3 class="text-white font-bold mb-3 tracking-wide">Total Stealth</h3>
                  <p class="text-sm text-slate-400 leading-relaxed font-light">Invisible to Zoom, Teams, and Proctoring tools. No screen capture trace. You are a ghost.</p>
              </div>
              
              <div class="physics-card p-8 transition group bg-white/5 hover:bg-white/10">
                  <div class="w-14 h-14 rounded-2xl bg-blue-500/5 flex items-center justify-center mb-8 group-hover:scale-110 transition border border-blue-500/10">
                      <i class="fa-solid fa-eye text-2xl text-blue-300"></i>
                  </div>
                  <h3 class="text-white font-bold mb-3 tracking-wide">Visual Context</h3>
                  <p class="text-sm text-slate-400 leading-relaxed font-light">It sees the whiteboard. It solves the system design diagram. It understands the architecture.</p>
              </div>

              <div class="physics-card p-8 transition group bg-white/5 hover:bg-white/10">
                  <div class="w-14 h-14 rounded-2xl bg-red-500/5 flex items-center justify-center mb-8 group-hover:scale-110 transition border border-red-500/10">
                      <i class="fa-solid fa-microphone text-2xl text-red-300"></i>
                  </div>
                  <h3 class="text-white font-bold mb-3 tracking-wide">Voice Input</h3>
                  <p class="text-sm text-slate-400 leading-relaxed font-light">Interviewer asks a question? Whis hears it and generates the answer before they finish speaking.</p>
              </div>
              
               <div class="physics-card p-8 transition group bg-white/5 hover:bg-white/10">
                  <div class="w-14 h-14 rounded-2xl bg-yellow-500/5 flex items-center justify-center mb-8 group-hover:scale-110 transition border border-yellow-500/10">
                      <i class="fa-solid fa-language text-2xl text-yellow-300"></i>
                  </div>
                  <h3 class="text-white font-bold mb-3 tracking-wide">Polyglot Mode</h3>
                  <p class="text-sm text-slate-400 leading-relaxed font-light">Translates Mandarin, Hindi, or Spanish questions into English solutions instantly.</p>
              </div>
              
              <div class="physics-card p-8 transition group bg-white/5 hover:bg-white/10">
                  <div class="w-14 h-14 rounded-2xl bg-green-500/5 flex items-center justify-center mb-8 group-hover:scale-110 transition border border-green-500/10">
                      <i class="fa-solid fa-keyboard text-2xl text-green-300"></i>
                  </div>
                  <h3 class="text-white font-bold mb-3 tracking-wide">Direct Input</h3>
                  <p class="text-sm text-slate-400 leading-relaxed font-light">Need to clarify? Type directly into the overlay without Alt-Tabbing or switching windows.</p>
              </div>
              
              <div class="physics-card p-8 transition group bg-white/5 hover:bg-white/10">
                  <div class="w-14 h-14 rounded-2xl bg-slate-500/5 flex items-center justify-center mb-8 group-hover:scale-110 transition border border-slate-500/10">
                      <i class="fa-solid fa-bolt text-2xl text-white"></i>
                  </div>
                  <h3 class="text-white font-bold mb-3 tracking-wide">Low Latency</h3>
                  <p class="text-sm text-slate-400 leading-relaxed font-light">High performance native app ensures <50ms response time on modern machines.</p>
              </div>
          </div>
      </div>
  </section>

  <section class="py-20 md:py-32 border-t border-white/5 bg-[#050505] relative">
      <div class="absolute bottom-0 left-0 w-[500px] h-[500px] bg-accent/5 rounded-full blur-[100px] pointer-events-none"></div>
      <div class="max-w-7xl mx-auto px-6 mb-12 md:mb-16 flex justify-between items-end relative z-10">
          <h2 class="text-3xl md:text-4xl font-light text-white tracking-tight">Verified Outcomes.</h2>
          <div class="flex gap-3">
              <button class="w-12 h-12 rounded-full border border-white/10 flex items-center justify-center hover:bg-white/10 transition backdrop-blur-md"><i class="fa-solid fa-arrow-left text-white"></i></button>
              <button class="w-12 h-12 rounded-full border border-white/10 flex items-center justify-center hover:bg-white/10 transition backdrop-blur-md"><i class="fa-solid fa-arrow-right text-white"></i></button>
          </div>
      </div>
      
      <div class="flex gap-8 overflow-x-auto pb-16 px-6 snap-x mandatory no-scrollbar relative z-10" style="-webkit-overflow-scrolling: touch;">
          <div class="physics-card p-8 min-w-[320px] md:min-w-[450px] snap-center bg-[#0a0a0a]">
              <div class="flex gap-1 text-accent text-xs mb-8"><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i></div>
              <p class="text-sm md:text-base text-slate-300 leading-relaxed mb-8 font-light italic">"I was stuck on a graph DP problem during my Google L5 loop. Whis provided the optimal solution instantly. The interviewer was impressed by my 'intuition'."</p>
              <div class="flex items-center gap-4 border-t border-white/5 pt-6">
                  <div class="w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center text-sm font-bold text-white shadow-lg">J</div>
                  <div><p class="text-sm font-bold text-white">James K.</p><p class="text-[10px] text-slate-500 uppercase tracking-widest">Google, L5</p></div>
              </div>
          </div>
          
           <div class="physics-card p-8 min-w-[320px] md:min-w-[450px] snap-center bg-[#0a0a0a]">
              <div class="flex gap-1 text-accent text-xs mb-8"><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i></div>
              <p class="text-sm md:text-base text-slate-300 leading-relaxed mb-8 font-light italic">"The stealth mode is legit. I screenshared my entire desktop for 45 minutes and the interviewer saw nothing but my IDE. It paid for itself 100x over."</p>
              <div class="flex items-center gap-4 border-t border-white/5 pt-6">
                  <div class="w-10 h-10 rounded-full bg-orange-600 flex items-center justify-center text-sm font-bold text-white shadow-lg">S</div>
                  <div><p class="text-sm font-bold text-white">Sarah M.</p><p class="text-[10px] text-slate-500 uppercase tracking-widest">Amazon, SDE II</p></div>
              </div>
          </div>
          
           <div class="physics-card p-8 min-w-[320px] md:min-w-[450px] snap-center bg-[#0a0a0a]">
              <div class="flex gap-1 text-accent text-xs mb-8"><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i></div>
              <p class="text-sm md:text-base text-slate-300 leading-relaxed mb-8 font-light italic">"English isn't my first language. Whis translated my thoughts into professional answers live. It gave me the confidence I needed."</p>
              <div class="flex items-center gap-4 border-t border-white/5 pt-6">
                  <div class="w-10 h-10 rounded-full bg-green-600 flex items-center justify-center text-sm font-bold text-white shadow-lg">M</div>
                  <div><p class="text-sm font-bold text-white">Michael T.</p><p class="text-[10px] text-slate-500 uppercase tracking-widest">Uber, L4</p></div>
              </div>
          </div>
      </div>
  </section>

  <section id="pricing" class="py-20 md:py-32 border-t border-white/5 relative bg-[#050505]">
    <div class="absolute inset-0 z-0 opacity-40 pointer-events-none" style="background: radial-gradient(circle at 50% 50%, #00f2ff05, transparent 70%);"></div>
    
    <div class="max-w-7xl mx-auto px-6 text-center relative z-10">
        <div class="mb-16 max-w-3xl mx-auto">
            <h2 class="text-4xl md:text-6xl font-light text-white mb-8 tracking-tight text-gradient-premium">Invest In Your Career.</h2>
            <div class="p-6 rounded-2xl bg-white/5 backdrop-blur-xl border border-white/10 text-left relative overflow-hidden shadow-2xl">
                <div class="absolute left-0 top-0 bottom-0 w-1 bg-gradient-to-b from-accent to-purple-500"></div>
                <p class="text-slate-300 text-sm md:text-lg italic font-light relative z-10 pl-4">
                    "We build for your success, not just for revenue. We only win when you get the offer. <span class="text-accent not-italic font-bold">Your career breakthrough is our priority.</span>"
                </p>
            </div>
        </div>
        
        <div class="inline-flex bg-gradient-to-b from-gray-900 to-black p-1.5 rounded-2xl border border-white/10 mb-16 relative shadow-[inset_0_2px_10px_rgba(0,0,0,0.8)] ring-1 ring-white/5">
           <button id="btnMonthly" class="px-8 py-3 rounded-xl text-xs font-bold bg-gradient-to-t from-gray-100 to-white text-black shadow-[0_4px_10px_rgba(0,0,0,0.3)] transition transform scale-[1.02] border-b-2 border-gray-300" onclick="setCycle('monthly')">Monthly</button>
           <button id="btnAnnual" class="px-8 py-3 rounded-xl text-xs font-bold text-slate-400 hover:text-white transition" onclick="setCycle('annual')">Yearly (-20%)</button>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 md:gap-10 max-w-6xl mx-auto items-stretch">
            
            <div class="physics-card p-8 text-left flex flex-col h-full border-white/5 hover:border-white/20 relative group backdrop-blur-2xl bg-white/5 transition-all duration-300 shadow-xl">
                <div class="absolute top-0 right-0 bg-white/10 text-white border-l border-b border-white/10 text-[9px] font-bold px-4 py-1.5 rounded-bl-xl uppercase tracking-wider backdrop-blur-md">Entry Level</div>
                <h3 class="text-xs font-bold text-slate-400 uppercase tracking-[0.3em] mb-6">Starter</h3>
                <div class="text-5xl md:text-6xl font-light text-white mb-2 tracking-tighter drop-shadow-lg">Free</div>
                <p class="text-[10px] text-slate-500 uppercase tracking-wider mb-10 font-medium">No credit card needed</p>
                <div class="space-y-5 text-xs text-slate-400 mb-10 flex-grow font-medium">
                    <div class="flex gap-4 text-slate-200 bg-gradient-to-br from-white/10 to-transparent p-4 rounded-xl border border-white/10 shadow-[inset_0_1px_0_rgba(255,255,255,0.1)]">
                        <i class="fa-solid fa-crown text-[#FFD700] mt-0.5 drop-shadow-[0_0_5px_rgba(255,215,0,0.5)]"></i> 
                        <div>
                            <span class="font-bold text-white tracking-wide">3 FREE ELITE SESSIONS</span>
                            <p class="font-normal text-[10px] text-slate-400 mt-2 opacity-80 leading-relaxed">Full undetectable access to ace your first interview.</p>
                        </div>
                    </div>
                    <p class="flex gap-4 items-center group-hover:text-slate-300 transition"><i class="fa-solid fa-check text-slate-600"></i> 10 Daily Syntheses (Forever)</p>
                    <p class="flex gap-4 items-center group-hover:text-slate-300 transition"><i class="fa-solid fa-check text-slate-600"></i> Basic Code Generation</p>
                </div>
                <button onclick="openDownloadModal()" class="w-full py-5 rounded-xl bg-white/5 text-white hover:bg-white hover:text-black hover:scale-[1.02] transition duration-300 text-xs font-bold uppercase border border-white/10 tracking-widest shadow-lg backdrop-blur-md">Download Now</button>
            </div>

            <div class="physics-card p-8 text-left flex flex-col h-full border-white/10 hover:border-white/30 backdrop-blur-3xl bg-black/60 group relative transition-all duration-300 shadow-2xl">
                <div class="absolute inset-x-0 top-0 h-[1px] bg-gradient-to-r from-transparent via-white/30 to-transparent"></div>
                <h3 class="text-xs font-bold text-slate-200 uppercase tracking-[0.3em] mb-6">Pro License</h3>
                <div class="text-5xl md:text-6xl font-light text-transparent bg-clip-text bg-gradient-to-b from-white to-slate-400 mb-8 tracking-tighter" id="pricePro">...</div>
                <div class="space-y-5 text-xs text-slate-400 mb-10 flex-grow font-medium">
                    <p class="flex gap-4 items-center group-hover:text-white transition"><i class="fa-solid fa-check text-white drop-shadow-[0_0_5px_rgba(255,255,255,0.5)]"></i> Unlimited Syntheses</p>
                    <p class="flex gap-4 items-center group-hover:text-white transition"><i class="fa-solid fa-check text-white drop-shadow-[0_0_5px_rgba(255,255,255,0.5)]"></i> Visual Context Analysis</p>
                    <p class="flex gap-4 items-center group-hover:text-white transition"><i class="fa-solid fa-check text-white drop-shadow-[0_0_5px_rgba(255,255,255,0.5)]"></i> Audio Ingestion</p>
                    <p class="flex gap-4 text-red-400 opacity-80 items-center"><i class="fa-solid fa-video"></i> Visible on Screenshare</p>
                </div>
                <button id="btnPro" disabled onclick="initiatePayment('pro')" class="w-full py-5 rounded-xl bg-white/5 text-white hover:bg-white/10 border border-white/10 text-xs font-bold uppercase transition disabled:opacity-50 disabled:cursor-not-allowed tracking-widest backdrop-blur-sm shadow-[inset_0_1px_0_rgba(255,255,255,0.1)] hover:shadow-white/20">Upgrade to Pro</button>
            </div>

            <div class="physics-card pricing-elite p-8 text-left flex flex-col h-full relative z-10 transform md:-translate-y-6 shadow-[0_0_80px_rgba(0,242,255,0.1)] bg-black/80">
                <div class="absolute inset-0 bg-gradient-to-b from-white/5 to-transparent pointer-events-none"></div>
                
                <div class="absolute top-8 right-8 p-2.5 rounded-full bg-accent/10 border border-accent/30 shadow-[0_0_20px_var(--accent-glow)]"><i class="fa-solid fa-crown text-accent text-xl animate-pulse-slow"></i></div>
                <h3 class="text-xs font-bold text-transparent bg-clip-text bg-gradient-to-r from-accent to-cyan-300 uppercase tracking-[0.3em] mb-6 drop-shadow-[0_0_10px_rgba(0,242,255,0.5)]">Elite License</h3>
                <div class="text-5xl md:text-6xl font-light text-white mb-8 tracking-tighter drop-shadow-[0_0_15px_rgba(255,255,255,0.3)]" id="priceStealth">...</div>
                
                <div class="space-y-5 text-xs text-slate-200 mb-10 flex-grow font-medium relative z-10">
                    <p class="flex gap-4 items-center"><i class="fa-solid fa-shield-halved text-accent drop-shadow-[0_0_8px_var(--accent)]"></i> 100% Undetectable</p>
                    <p class="flex gap-4 items-center"><i class="fa-solid fa-ghost text-accent drop-shadow-[0_0_8px_var(--accent)]"></i> Invisible to Screenshare</p>
                    <p class="flex gap-4 items-center"><i class="fa-solid fa-keyboard text-accent drop-shadow-[0_0_8px_var(--accent)]"></i> Direct Input Mode</p>
                    <p class="flex gap-4 items-center"><i class="fa-solid fa-user-secret text-accent drop-shadow-[0_0_8px_var(--accent)]"></i> Ghost Dock (No Icon)</p>
                    <p class="flex gap-4 items-center"><i class="fa-solid fa-headset text-accent drop-shadow-[0_0_8px_var(--accent)]"></i> Priority Support</p>
                </div>
                
                <button id="btnElite" disabled onclick="initiatePayment('pro_plus')" class="w-full py-5 rounded-xl bg-gradient-to-r from-accent via-cyan-400 to-accent bg-[length:200%_auto] animate-shimmer text-black hover:brightness-110 text-xs font-black uppercase transition shadow-[0_0_40px_rgba(0,242,255,0.4)] hover:shadow-[0_0_60px_rgba(0,242,255,0.6)] disabled:opacity-50 disabled:cursor-not-allowed tracking-widest relative z-10 hover:scale-[1.03] duration-300 border-none ring-1 ring-white/20">Get Elite Access</button>
            </div>
        </div>
    </div>
  </section>

  <section class="py-20 md:py-24 border-t border-white/5 bg-white/5">
      <div class="max-w-3xl mx-auto px-6">
          <h2 class="text-2xl font-light text-white mb-12 text-center tracking-wide">Frequently Asked Questions.</h2>
          <div class="space-y-5">
              <div class="border border-white/10 rounded-2xl bg-black overflow-hidden hover:border-white/20 transition duration-300" onclick="this.classList.toggle('faq-active')">
                  <div class="p-6 flex justify-between items-center cursor-pointer">
                      <span class="text-sm font-bold text-slate-200">Is it really undetectable?</span>
                      <i class="fa-solid fa-chevron-down text-slate-500 transition-transform duration-300"></i>
                  </div>
                  <div class="faq-content bg-white/5 px-6">
                      <p class="text-xs text-slate-400 py-6 leading-relaxed font-light">Yes. Whis-AI uses a proprietary graphics overlay technology that sits 'above' the operating system's screen capture hook used by Zoom, Teams, and standard proctoring software. It does not inject code into the browser, making it invisible to standard detection methods.</p>
                  </div>
              </div>
               <div class="border border-white/10 rounded-2xl bg-black overflow-hidden hover:border-white/20 transition duration-300" onclick="this.classList.toggle('faq-active')">
                  <div class="p-6 flex justify-between items-center cursor-pointer">
                      <span class="text-sm font-bold text-slate-200">Which operating systems?</span>
                      <i class="fa-solid fa-chevron-down text-slate-500 transition-transform duration-300"></i>
                  </div>
                  <div class="faq-content bg-white/5 px-6">
                      <p class="text-xs text-slate-400 py-6 leading-relaxed font-light">We support macOS (Apple Silicon M1/M2/M3 & Intel) and Windows 10/11. Linux support is currently in beta.</p>
                  </div>
              </div>
               <div class="border border-white/10 rounded-2xl bg-black overflow-hidden hover:border-white/20 transition duration-300" onclick="this.classList.toggle('faq-active')">
                  <div class="p-6 flex justify-between items-center cursor-pointer">
                      <span class="text-sm font-bold text-slate-200">Can I try it for free?</span>
                      <i class="fa-solid fa-chevron-down text-slate-500 transition-transform duration-300"></i>
                  </div>
                  <div class="faq-content bg-white/5 px-6">
                      <p class="text-xs text-slate-400 py-6 leading-relaxed font-light">Absolutely. The Free Starter plan now includes <strong>3 Full Elite Sessions</strong>. This allows you to test every feature (including invisibility) completely free in a real or mock interview setting. After that, you retain 10 free syntheses per day.</p>
                  </div>
              </div>
          </div>
      </div>
  </section>

  <footer class="py-16 bg-gradient-to-b from-[#050505] to-black border-t border-white/5 flex flex-col items-center gap-8 pb-32 md:pb-16">
    <div class="flex flex-wrap justify-center gap-10 text-slate-500 text-xs font-medium tracking-wide">
        <a href="/contact" class="hover:text-white transition">Contact</a>
        <a href="/troubleshoot" class="hover:text-white transition">Troubleshooting</a>
        <a href="/terms" class="hover:text-white transition">Terms of Service</a>
        <a href="/privacy" class="hover:text-white transition">Privacy Policy</a>
        <a href="/refund-policy" class="hover:text-white transition">Refund Policy</a>
    </div>
    <div class="flex flex-col items-center gap-3">
        <span class="text-accent text-2xl drop-shadow-[0_0_15px_var(--accent-glow)]"><i class="fa-solid fa-bolt"></i></span>
        <p class="text-slate-600 text-[10px] uppercase tracking-[0.2em] font-bold">Built for those who refuse to lose.</p>
    </div>
  </footer>

  <div id="loginModal" class="fixed inset-0 z-[100] hidden items-center justify-center p-4 bg-black/90 backdrop-blur-md transition-opacity duration-300">
      <div class="physics-card p-10 max-w-sm w-full text-center relative border border-white/20 shadow-2xl">
        <button onclick="closeLoginModal()" class="absolute top-4 right-4 text-slate-500 hover:text-white transition"><i class="fa-solid fa-times"></i></button>
        <div class="mb-6 w-12 h-12 rounded-full bg-white/5 border border-white/10 mx-auto flex items-center justify-center"><i class="fa-solid fa-user-astronaut text-white text-xl"></i></div>
        <h3 class="text-xl font-medium text-white mb-2">Identify Yourself</h3>
        <p class="text-xs text-slate-400 mb-8">Access your dashboard and subscription.</p>
        <div id="googleBtnContainer" class="flex justify-center h-[50px] overflow-hidden"></div>
      </div>
  </div>

  <div id="successModal" class="fixed inset-0 z-[200] hidden items-center justify-center p-4 bg-black/90 backdrop-blur-md">
      <div class="physics-card p-8 max-w-sm w-full text-center border border-green-500/30 shadow-[0_0_50px_rgba(16,185,129,0.2)]">
          <div class="w-16 h-16 rounded-full bg-green-500/20 flex items-center justify-center mx-auto mb-6 border border-green-500/50">
              <i class="fa-solid fa-check text-2xl text-green-400"></i>
          </div>
          <h3 class="text-xl font-bold text-white mb-2">Upgrade Complete</h3>
          <p class="text-slate-400 text-sm mb-8">Your account capabilities have been maximized. Systems are fully operational.</p>
          <button onclick="window.location.reload()" class="w-full py-3 rounded-xl bg-green-500 text-black font-bold hover:bg-green-400 transition shadow-lg">Initialize System</button>
      </div>
  </div>

  <div id="paymentModal" class="fixed inset-0 z-[150] hidden items-center justify-center p-4 bg-black/90 backdrop-blur-md">
    <div class="physics-card p-8 max-w-sm w-full text-center border border-white/20 relative">
        <button onclick="closePaymentModal()" class="absolute top-4 right-4 text-slate-500 hover:text-white transition"><i class="fa-solid fa-times"></i></button>
        
        <h3 class="text-xl font-bold text-white mb-2">Secure Gateway</h3>
        <p class="text-xs text-slate-400 mb-8">Encrypted 256-bit transaction.</p>

        <button onclick="triggerRazorpayFlow(event)" class="w-full py-3.5 mb-4 rounded-xl bg-[#3395ff] text-white font-bold hover:brightness-110 transition flex items-center justify-center gap-3 shadow-lg">
            <i class="fa-solid fa-credit-card"></i> Card / UPI (Razorpay)
        </button>

        <div class="relative flex py-2 items-center mb-4 opacity-50">
            <div class="flex-grow border-t border-white/10"></div>
            <span class="flex-shrink mx-4 text-[10px] text-slate-500">INTERNATIONAL</span>
            <div class="flex-grow border-t border-white/10"></div>
        </div>

        <div id="paypal-button-container" class="w-full min-h-[45px]"></div>
    </div>
  </div>

  <div id="downloadModal" class="fixed inset-0 z-[100] hidden items-center justify-center p-4 bg-black/90 backdrop-blur-md">
    <div class="physics-card p-8 max-w-md w-full border border-white/10">
        <button onclick="closeDownloadModal()" class="absolute top-4 right-4 text-slate-500 hover:text-white transition"><i class="fa-solid fa-times"></i></button>
        <h3 class="text-lg font-medium text-white mb-6">Select Architecture</h3>
        <div class="space-y-3">
            <a href="https://github.com/syedwaseemfahad/whis-releases/releases/download/v.1.4.mac/Whis-1.0.1-arm64.dmg" class="flex items-center justify-between p-4 bg-white/5 rounded-xl hover:bg-white/10 transition group border border-white/5 hover:border-white/20">
                <span class="flex items-center gap-4 text-sm text-white font-bold">
                    <div class="w-8 h-8 rounded bg-white text-black flex items-center justify-center"><i class="fa-brands fa-apple text-xl"></i></div>
                    macOS (Apple Silicon)
                </span>
                <i class="fa-solid fa-download text-slate-500 group-hover:text-white transition"></i>
            </a>
             <a href="https://github.com/syedwaseemfahad/whis-releases/releases/download/v.1.4.mac/Whis-1.0.1-arm64.dmg" class="flex items-center justify-between p-4 bg-white/5 rounded-xl hover:bg-white/10 transition group border border-white/5 hover:border-white/20">
                <span class="flex items-center gap-4 text-sm text-white font-bold">
                    <div class="w-8 h-8 rounded bg-gray-600 text-white flex items-center justify-center"><i class="fa-brands fa-apple text-xl"></i></div>
                    macOS (Intel)
                </span>
                <i class="fa-solid fa-download text-slate-500 group-hover:text-white transition"></i>
            </a>
            <a href="https://github.com/syedwaseemfahad/whis-releases/releases/download/v.1.4.windows/Whis.Setup.1.0.1.exe" class="flex items-center justify-between p-4 bg-white/5 rounded-xl hover:bg-white/10 transition group border border-white/5 hover:border-white/20">
                <span class="flex items-center gap-4 text-sm text-white font-bold">
                      <div class="w-8 h-8 rounded bg-[#0078D6] text-white flex items-center justify-center"><i class="fa-brands fa-windows text-xl"></i></div>
                      Windows 10 / 11
                </span>
                <i class="fa-solid fa-download text-slate-500 group-hover:text-white transition"></i>
            </a>
        </div>
        <p class="text-[10px] text-center text-slate-500 mt-6 pt-4 border-t border-white/5">Installing this activates your 3 Free Elite Sessions instantly.</p>
    </div>
  </div>

  <div id="profileModal" class="fixed inset-0 z-[100] hidden items-center justify-center p-4 bg-black/90 backdrop-blur-md">
    <div class="physics-card p-8 max-w-sm w-full text-center border border-white/10">
        <button onclick="closeProfileModal()" class="absolute top-4 right-4 text-slate-500 hover:text-white transition"><i class="fa-solid fa-times"></i></button>
        <img id="modalUserAvatar" class="w-20 h-20 rounded-full mx-auto mb-4 border-2 border-accent p-1 object-cover" />
        <h3 id="modalUserName" class="text-lg font-bold text-white mb-6">User</h3>
        <div class="bg-white/5 rounded-xl p-6 text-left mb-6 border border-white/5">
            <p class="text-[10px] text-slate-500 uppercase tracking-widest mb-1">Current Plan</p>
            <div class="flex justify-between items-baseline">
                <span id="modalPlanName" class="text-xl font-bold text-white">Free</span>
                <span id="modalPlanStatus" class="text-[10px] bg-white/10 px-2 py-0.5 rounded text-white border border-white/10">ACTIVE</span>
            </div>
            <div id="modalPlanValidity" class="text-[10px] text-slate-400 mt-2 font-mono"></div>
        </div>
        <button onclick="logout()" class="w-full py-3 rounded-lg bg-red-500/10 text-red-400 hover:bg-red-500/20 text-xs font-bold uppercase transition border border-red-500/20">Sign Out</button>
    </div>
  </div>

  <script>
    // --- CELEBRATION LOGIC (OPTIMIZED: CLEAR INTERVALS) ---
    let celebrationInterval;
    let confettiInterval;

    function triggerCelebration() {
        const modal = document.getElementById('celebrationModal');
        modal.classList.remove('hidden');
        modal.classList.add('flex');

        // Play Sound
        const audio = new Audio('https://assets.mixkit.co/active_storage/sfx/1435/1435-preview.mp3');
        audio.volume = 0.5;
        audio.play().catch(e => console.log("Audio autoplay blocked"));

        fireContinuousConfetti();
        startCountdown();
    }

    function fireContinuousConfetti() {
        // REDUCED FREQUENCY & PARTICLE COUNT TO FIX LAG
        const duration = 7000; 
        const animationEnd = Date.now() + duration;
        const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 2000 };

        function random(min, max) { return Math.random() * (max - min) + min; }

        confettiInterval = setInterval(function() {
          const timeLeft = animationEnd - Date.now();

          if (timeLeft <= 0) {
            return clearInterval(confettiInterval);
          }

          // Reduced density of confetti
          const particleCount = 25 * (timeLeft / duration);
          confetti(Object.assign({}, defaults, { particleCount, origin: { x: random(0.1, 0.3), y: Math.random() - 0.2 } }));
          confetti(Object.assign({}, defaults, { particleCount, origin: { x: random(0.7, 0.9), y: Math.random() - 0.2 } }));
        }, 500); 
    }

    function startCountdown() {
        let timeLeft = 7;
        const timerEl = document.getElementById('countdownTimer');
        
        celebrationInterval = setInterval(() => {
            timeLeft--;
            if(timeLeft >= 0) {
                timerEl.innerText = timeLeft;
            }
            if(timeLeft <= 0) {
                closeCelebration();
            }
        }, 1000);
    }

    function closeCelebration() {
        clearInterval(celebrationInterval);
        clearInterval(confettiInterval); // Stop confetti
        
        const modal = document.getElementById('celebrationModal');
        modal.classList.add('opacity-0'); 
        setTimeout(() => {
            modal.classList.add('hidden');
            modal.classList.remove('flex', 'opacity-0');
            if (window.innerWidth >= 768) {
                openDownloadModal();
            }
        }, 500);
    }

    // --- 1. CORE PHYSICS & ANIMATIONS (HEAVILY OPTIMIZED) ---
    function initPhysics() {
        // Disable on mobile completely for performance
        if(window.innerWidth < 768) return; 

        // CRITICAL FIX: Attach listener to individual cards ONLY
        // This prevents re-calculating position for ALL cards when moving mouse over ONE.
        const cards = document.querySelectorAll('.physics-card, .carousel-item');
        
        cards.forEach(card => {
            card.addEventListener('mousemove', (e) => {
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                // Directly update specific card, no global loop
                card.style.setProperty('--mouse-x', `${x}px`);
                card.style.setProperty('--mouse-y', `${y}px`);
            });
        });
    }

    function playIntro() {
        const t1 = document.getElementById('intro-text');
        const layer = document.getElementById('intro-layer');
        setTimeout(() => t1.classList.add('intro-active'), 100);
        setTimeout(() => { layer.style.opacity = '0'; }, 1800); 
        setTimeout(() => { layer.style.display = 'none'; }, 2600);
    }

    // --- 2. CSS-BASED CAROUSEL (NO VIDEOS) ---
    const slides = [
        { 
            label: 'VISUAL CONTEXT ANALYSIS',
            // HTML for "Scanning" Animation
            html: `
            <div class="relative w-full h-full bg-[#0a0a0a] flex items-center justify-center overflow-hidden">
                <div class="absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20"></div>
                <div class="w-3/4 h-3/4 border border-white/10 rounded-xl relative overflow-hidden bg-black/50 p-4">
                     <div class="flex gap-2 mb-4">
                        <div class="w-2 h-2 rounded-full bg-red-500"></div>
                        <div class="w-2 h-2 rounded-full bg-yellow-500"></div>
                        <div class="w-2 h-2 rounded-full bg-green-500"></div>
                     </div>
                     <div class="space-y-2 opacity-60">
                         <div class="h-2 bg-slate-700 rounded w-1/2"></div>
                         <div class="h-2 bg-slate-700 rounded w-3/4"></div>
                         <div class="h-2 bg-slate-700 rounded w-full"></div>
                         <div class="h-2 bg-slate-700 rounded w-2/3"></div>
                     </div>
                     <div class="scan-line"></div>
                     <div class="absolute bottom-4 right-4 text-[10px] text-accent font-mono">DETECTING...</div>
                </div>
            </div>`
        },
        { 
            label: 'REAL-TIME CODE SYNTHESIS',
            // HTML for "Code Typing" Static Representation
            html: `
            <div class="relative w-full h-full bg-[#0a0a0a] flex items-center justify-center">
                 <div class="w-full h-full p-8 font-mono text-xs text-slate-300 leading-relaxed overflow-hidden">
                    <span class="text-purple-400">def</span> <span class="text-blue-400">solve_problem</span>(self, root):<br>
                    &nbsp;&nbsp;if not root: <span class="text-purple-400">return</span> 0<br>
                    &nbsp;&nbsp;q = collections.deque([root])<br>
                    &nbsp;&nbsp;res = []<br>
                    &nbsp;&nbsp;<span class="text-purple-400">while</span> q:<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;node = q.popleft()<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;res.append(node.val)<br>
                    &nbsp;&nbsp;<span class="text-green-400"># Optimal Solution Found</span><br>
                    &nbsp;&nbsp;<span class="inline-block w-2 h-4 bg-accent animate-pulse align-middle"></span>
                 </div>
            </div>`
        },
        { 
            label: 'AUDIO STREAM INGESTION',
            // HTML for "Audio Waveform" Animation
            html: `
            <div class="relative w-full h-full bg-[#0a0a0a] flex items-center justify-center gap-1">
                <div class="waveform-bar h-12" style="animation-delay: 0.1s"></div>
                <div class="waveform-bar h-16" style="animation-delay: 0.2s"></div>
                <div class="waveform-bar h-8" style="animation-delay: 0.3s"></div>
                <div class="waveform-bar h-20" style="animation-delay: 0.1s"></div>
                <div class="waveform-bar h-14" style="animation-delay: 0.4s"></div>
                <div class="waveform-bar h-10" style="animation-delay: 0.2s"></div>
                <div class="waveform-bar h-24" style="animation-delay: 0.5s"></div>
                <div class="waveform-bar h-12" style="animation-delay: 0.3s"></div>
            </div>`
        }
    ];
    let activeIndex = 0;
    
    function initCarousel() {
        const container = document.getElementById('carouselContainer');
        container.innerHTML = '';
        slides.forEach((s, i) => {
            const div = document.createElement('div');
            div.className = 'carousel-item physics-card'; 
            div.id = `c-item-${i}`;
            
            // Inject Generated HTML instead of Video
            div.innerHTML = s.html;

            container.appendChild(div);
        });
        updateCarousel();
        
        // Auto rotate
        setInterval(() => {
             nextSlide();
        }, 5000);
    }

    function updateCarousel() {
        const total = slides.length;
        const prev = (activeIndex - 1 + total) % total;
        const next = (activeIndex + 1) % total;
        
        slides.forEach((_, i) => {
            const el = document.getElementById(`c-item-${i}`);
            
            // Re-apply physics listener to new dynamic elements
            if(!el.hasAttribute('data-physics-bound')) {
                el.addEventListener('mousemove', (e) => {
                    const rect = el.getBoundingClientRect();
                    el.style.setProperty('--mouse-x', `${e.clientX - rect.left}px`);
                    el.style.setProperty('--mouse-y', `${e.clientY - rect.top}px`);
                });
                el.setAttribute('data-physics-bound', 'true');
            }

            el.className = 'carousel-item physics-card transition-all duration-700 ease-[cubic-bezier(0.25,1,0.5,1)]';
            
            if(i === activeIndex) {
                el.classList.add('item-center');
            } else if (i === prev) {
                el.classList.add('item-left');
            } else if (i === next) {
                el.classList.add('item-right');
            } else {
                el.classList.add('item-hidden');
            }
        });
        
        const label = document.getElementById('featureLabel');
        label.style.opacity = '0';
        setTimeout(() => {
            label.innerText = slides[activeIndex].label;
            label.style.opacity = '1';
        }, 300);
    }
    
    function nextSlide() {
        activeIndex = (activeIndex + 1) % slides.length; 
        updateCarousel();
    }

    // --- 3. IDE TYPEWRITER EFFECT ---
    const codeLines = [
        { text: "class ", class: "keyword" }, { text: "Solution", class: "function" }, { text: ":\n", class: "" },
        { text: "    def ", class: "keyword" }, { text: "trap", class: "function" }, { text: "(self, height: List[int]) -> int:\n", class: "" },
        { text: "        if not ", class: "keyword" }, { text: "height: ", class: "" }, { text: "return ", class: "keyword" }, { text: "0\n", class: "number" },
        { text: "        l, r = ", class: "" }, { text: "0", class: "number" }, { text: ", len(height) - ", class: "" }, { text: "1\n", class: "number" },
        { text: "        leftMax, rightMax = height[l], height[r]\n", class: "" },
        { text: "        res = ", class: "" }, { text: "0\n", class: "number" },
        { text: "        while ", class: "keyword" }, { text: "l < r:\n", class: "" },
        { text: "            if ", class: "keyword" }, { text: "leftMax < rightMax:\n", class: "" },
        { text: "                l += ", class: "" }, { text: "1\n", class: "number" },
        { text: "                leftMax = max(leftMax, height[l])\n", class: "" },
        { text: "                res += leftMax - height[l]\n", class: "" },
        { text: "            else", class: "keyword" }, { text: ":\n", class: "" },
        { text: "                r -= ", class: "" }, { text: "1\n", class: "number" },
        { text: "                rightMax = max(rightMax, height[r])\n", class: "" },
        { text: "                res += rightMax - height[r]\n", class: "" },
        { text: "        return ", class: "keyword" }, { text: "res", class: "" }
    ];
    let currentPart = 0; let currentChar = 0;
    
    function typeCode() {
        const el = document.getElementById('code-display');
        if(!el) return; 

        if (currentPart < codeLines.length) {
            const part = codeLines[currentPart];
            let span = el.lastElementChild;
            if (currentChar === 0 || !span) {
                span = document.createElement('span');
                if (part.class) span.className = part.class;
                el.appendChild(span);
            }
            span.textContent += part.text[currentChar];
            currentChar++;
            if (currentChar >= part.text.length) {
                currentPart++;
                currentChar = 0;
            }
            setTimeout(typeCode, 15);
        } else {
            setTimeout(() => { el.innerHTML = ''; currentPart = 0; currentChar = 0; typeCode(); }, 4000);
        }
    }

    // --- 4. BACKEND CONNECTION & AUTH ---
    const BACKEND_URL="https://whis-backend.onrender.com";
    let currentUser = null, currentCycle = 'monthly', currentTier = 'free';
    let PRICING_CONFIG = null;
    let GOOGLE_CLIENT_ID = null;

    async function fetchPricingConfig() {
        try {
            const res = await fetch(`${BACKEND_URL}/api/config`);
            if(res.ok) {
                const data = await res.json();
                PRICING_CONFIG = data.pricing;
                GOOGLE_CLIENT_ID = data.googleClientId;
                updatePricingUI();
                document.getElementById('btnPro').disabled = false;
                document.getElementById('btnElite').disabled = false;
            }
        } catch(e) { console.error("Config Error", e); }
    }

    function checkUser(){ 
        const s=localStorage.getItem('whisUser'); 
        if(s){ 
            try{ 
                currentUser=JSON.parse(s); 
                updateNavUI(currentUser); 
                fetchUserStatus(); 
            }catch(e){localStorage.removeItem('whisUser');} 
        } 
    } 
    
    function updateNavUI(u){ 
        document.getElementById('signInBtn').style.display='none'; 
        const profileTrigger = document.getElementById('userProfileTrigger');
        profileTrigger.classList.remove('hidden'); 
        profileTrigger.classList.add('flex'); 
        document.getElementById('navUserAvatar').src = u.avatarUrl; 
    }
    
    async function handleGoogleRes(res){
        try {
            const r=await fetch(`${BACKEND_URL}/api/auth/google`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:res.credential})});
            const d=await r.json();
            if(d.success){ 
                localStorage.setItem('whisUser',JSON.stringify(d.user)); 
                currentUser=d.user; 
                updateNavUI(currentUser); 
                fetchUserStatus(); 
                closeLoginModal(); 
            }
        } catch(e){ console.error(e); }
    }
    
    function formatPrice(amount, discount) {
        if (!amount) return "...";
        if(discount > 0) {
            const discounted = Math.floor(amount * (1 - discount/100)); 
            return `<span class="text-gradient-gold">‚Çπ${discounted}</span> <span class="text-sm line-through text-slate-500 opacity-60 mx-1">‚Çπ${Math.floor(amount)}</span> <span class="text-[10px] font-bold text-black bg-accent px-1.5 py-0.5 rounded align-middle shadow-[0_0_10px_var(--accent)]">-${discount}%</span>`;
        }
        return `‚Çπ${Math.floor(amount)}`;
    }

    function setCycle(c){
        currentCycle=c;
        const btnM=document.getElementById('btnMonthly'); 
        const btnA=document.getElementById('btnAnnual');
        
        const activeClass = "px-8 py-3 rounded-xl text-xs font-bold bg-gradient-to-t from-gray-200 to-white text-black shadow-[0_4px_10px_rgba(0,0,0,0.3)] transition transform scale-[1.02]";
        const inactiveClass = "px-8 py-3 rounded-xl text-xs font-bold text-slate-500 hover:text-white transition";

        if(c==='monthly'){
            btnM.className = activeClass;
            btnA.className = inactiveClass;
        } else {
            btnA.className = activeClass;
            btnM.className = inactiveClass;
        }
        updatePricingUI();
    }

    function updatePricingUI() {
        if (!PRICING_CONFIG) return;
        const proDiv = document.getElementById('pricePro');
        const eliteDiv = document.getElementById('priceStealth');
        
        let proPrice = 0, elitePrice = 0;
        let proDisc = PRICING_CONFIG.pro.discount;
        let eliteDisc = PRICING_CONFIG.pro_plus.discount;

        if (currentCycle === 'monthly') {
            proPrice = PRICING_CONFIG.pro.monthly;
            elitePrice = PRICING_CONFIG.pro_plus.monthly;
            proDiv.innerHTML = `${formatPrice(proPrice, proDisc)}<span class="text-[12px] text-slate-500 block font-normal mt-1">/month</span>`;
            eliteDiv.innerHTML = `${formatPrice(elitePrice, eliteDisc)}<span class="text-[12px] text-slate-500 block font-normal mt-1">/month</span>`;
        } else {
            proPrice = PRICING_CONFIG.pro.annual_per_month;
            elitePrice = PRICING_CONFIG.pro_plus.annual_per_month;
            proDiv.innerHTML = `${formatPrice(proPrice, proDisc)}<span class="text-[12px] text-slate-500 block font-normal mt-1">/mo (billed yearly)</span>`;
            eliteDiv.innerHTML = `${formatPrice(elitePrice, eliteDisc)}<span class="text-[12px] text-slate-500 block font-normal mt-1">/mo (billed yearly)</span>`;
        }
    }

    async function fetchUserStatus() {
        if(!currentUser) return;
        try {
            const r = await fetch(`${BACKEND_URL}/api/user/status`, {headers:{'x-google-id':currentUser.googleId}});
            const d = await r.json();
            if(d.active) currentTier = d.tier; else currentTier = 'free';
            
            const badge = document.getElementById('navPlanBadge');
            const validityEl = document.getElementById('modalPlanValidity');
            
            if(d.active){
                badge.innerText = d.tier === 'pro_plus' ? 'ELITE' : 'PRO';
                badge.className = "text-[9px] font-bold text-accent uppercase tracking-wide";
                
                document.getElementById('modalPlanName').innerText = d.tier === 'pro_plus' ? 'Elite License' : 'Pro License';
                document.getElementById('modalPlanStatus').innerText = 'ACTIVE';
                
                if(d.expiry || d.validUntil) {
                    const dateStr = new Date(d.expiry || d.validUntil).toLocaleDateString();
                    validityEl.innerText = "Renews: " + dateStr;
                }
                
                const btnPro = document.getElementById('btnPro'); 
                const btnElite = document.getElementById('btnElite');
                if(d.tier === 'pro') { btnPro.innerText="Current Plan"; btnPro.disabled=true; btnElite.innerText="Upgrade to Elite"; }
                if(d.tier === 'pro_plus') { btnPro.innerText="Included"; btnPro.disabled=true; btnElite.innerText="Current Plan"; btnElite.disabled=true; }
            } else {
                badge.innerText = 'FREE';
                badge.className = "text-[9px] font-bold text-slate-400 uppercase tracking-wide";
            }
            document.getElementById('modalUserName').innerText = currentUser.name;
            document.getElementById('modalUserAvatar').src = currentUser.avatarUrl;
        } catch(e){}
    }

    // --- 5. PAYMENT SYSTEM ---
    let selectedTierForPayment = null; 
    const paymentModal = document.getElementById('paymentModal');

    function initiatePayment(targetTier) {
        if(!currentUser){ openLoginModal(); return; }
        if(currentTier === 'pro_plus') return;
        if(currentTier === 'pro' && targetTier === 'pro') return;
        selectedTierForPayment = targetTier;
        openPaymentModal();
    }

    function openPaymentModal() {
        paymentModal.classList.remove('hidden'); 
        paymentModal.classList.add('flex');
        document.getElementById('paypal-button-container').innerHTML = '';

        paypal.Buttons({
            style: { layout: 'vertical', color: 'gold', shape: 'rect', label: 'pay' },
            createOrder: async function(data, actions) {
                const res = await fetch(`${BACKEND_URL}/api/payment/create-paypal-order`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        googleId: currentUser.googleId, 
                        tier: selectedTierForPayment, 
                        cycle: currentCycle
                    })
                });
                const orderData = await res.json();
                return orderData.id; 
            },
            onApprove: async function(data, actions) {
                const res = await fetch(`${BACKEND_URL}/api/payment/verify-paypal`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ orderID: data.orderID, googleId: currentUser.googleId })
                });
                const details = await res.json();
                if (details.success) {
                    closePaymentModal();
                    document.getElementById('successModal').classList.remove('hidden');
                    document.getElementById('successModal').classList.add('flex');
                } else {
                    alert("PayPal Verification Failed.");
                }
            },
            onError: function (err) { alert("PayPal Error. Please try Razorpay."); }
        }).render('#paypal-button-container');
    }

    function closePaymentModal() {
        paymentModal.classList.add('hidden');
        paymentModal.classList.remove('flex');
    }

    async function triggerRazorpayFlow(event) {
        const targetTier = selectedTierForPayment;
        const isUpgrade = (currentTier === 'pro' && targetTier === 'pro_plus');
        const btn = event.currentTarget; 
        const orig = btn.innerHTML; 
        btn.innerHTML = '<i class="fa-solid fa-circle-notch fa-spin"></i> Processing...';
        
        try {
            const res = await fetch(`${BACKEND_URL}/api/payment/create-order`,{
                method:'POST', headers:{'Content-Type':'application/json'},
                body:JSON.stringify({
                    googleId: currentUser.googleId, 
                    tier: targetTier, 
                    cycle: currentCycle, 
                    isUpgrade: isUpgrade
                })
            });
            const data = await res.json();
            
            if(data.order_id){
                const rzp1 = new Razorpay({
                    "key": data.key_id, 
                    "amount": data.amount, 
                    "currency": data.currency, 
                    "name": "Whis AI",
                    "description": isUpgrade ? "Upgrade License" : "New License", 
                    "order_id": data.order_id,
                    "handler": async function (response){ 
                        try {
                            const verifyRes = await fetch(`${BACKEND_URL}/api/payment/verify`, {
                                method: 'POST', headers: {'Content-Type': 'application/json'},
                                body: JSON.stringify({
                                    razorpay_order_id: response.razorpay_order_id,
                                    razorpay_payment_id: response.razorpay_payment_id,
                                    razorpay_signature: response.razorpay_signature
                                })
                            });
                            const verifyData = await verifyRes.json();
                            if(verifyData.success){
                                closePaymentModal();
                                document.getElementById('successModal').classList.remove('hidden');
                                document.getElementById('successModal').classList.add('flex');
                            } else {
                                alert("Verification Failed.");
                            }
                        } catch(e) { alert("Network Error"); }
                    },
                    "theme": { "color": "#00f2ff" },
                    "modal": { "ondismiss": function(){ btn.innerHTML = orig; } }
                });
                rzp1.open();
            }
        } catch(e){ 
            console.error(e); 
            btn.innerHTML = orig; 
        }
    }

    function logout(){ localStorage.removeItem('whisUser'); location.reload(); }

    // --- 6. MODAL HELPERS ---
    const loginModal=document.getElementById('loginModal'); 
    const downloadModal=document.getElementById('downloadModal'); 
    const profileModal=document.getElementById('profileModal');
    
    function openLoginModal(){
        loginModal.classList.remove('hidden'); loginModal.classList.add('flex');
        if(window.google && GOOGLE_CLIENT_ID){
            google.accounts.id.initialize({client_id:GOOGLE_CLIENT_ID,callback:handleGoogleRes});
            google.accounts.id.renderButton(document.getElementById("googleBtnContainer"),{theme:"filled_black",size:"large",shape:"pill", width: "250"});
        }
    }
    
    function closeLoginModal(){loginModal.classList.add('hidden');loginModal.classList.remove('flex');}
    function openDownloadModal(){downloadModal.classList.remove('hidden');downloadModal.classList.add('flex');}
    function closeDownloadModal(){downloadModal.classList.add('hidden');downloadModal.classList.remove('flex');}
    function openProfileModal(){if(currentUser)fetchUserStatus();profileModal.classList.remove('hidden');profileModal.classList.add('flex');}
    function closeProfileModal(){profileModal.classList.add('hidden');profileModal.classList.remove('flex');}

    // --- INIT ---
    document.addEventListener("DOMContentLoaded", () => {
        playIntro();
        initCarousel();
        typeCode();
        checkUser();
        fetchPricingConfig();
        setTimeout(initPhysics, 500);

        // Celebration Trigger
        setTimeout(triggerCelebration, 10000);
    });
  </script>
</body>
</html>
